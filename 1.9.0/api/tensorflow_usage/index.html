
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TensorFlow Configuration</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/banner.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Migration Guide" href="../../migration-guide/" />
    <link rel="prev" title="Featurization of Conversations" href="../core-featurization/" />

  <!-- Google Tag Manager -->
  <script type="opt-in" data-type="application/javascript" data-name="analytics">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MMHSZCS');</script>
  <!-- End Google Tag Manager -->
   
  
  <meta itemprop="image" content="https://rasa.com/assets/img/facebook-og.png">
  <meta property="og:title" content="TensorFlow Configuration" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rasa.com/assets/img/facebook-og.png" />
  <meta property="og:url" content="https://rasa.com/docs/rasa/api/tensorflow_usage" />
  
    <meta name="description" content="Find out how to configure your environment for efficient usage of TensorFlow inside Rasa Open Source." />
    <meta itemprop="description" content="Find out how to configure your environment for efficient usage of TensorFlow inside Rasa Open Source.">
    <meta name="twitter:description" content="Find out how to configure your environment for efficient usage of TensorFlow inside Rasa Open Source." />
    <meta property="og:description" content="Find out how to configure your environment for efficient usage of TensorFlow inside Rasa Open Source." />
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Rasa_HQ">
  <meta name="twitter:title" content="TensorFlow Configuration">
  <meta name="twitter:creator" content="@Rasa_HQ">
  <meta name="twitter:image" content="https://rasa.com/assets/img/facebook-og.png">

  <link rel="stylesheet" href="../../_static/xq-light.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/fontawesome/css/fontawesome-all.css" type="text/css" />
  <link rel="stylesheet" type="text/css" href="https://rasa.com/assets/css/klaro.css">
  <script defer type="text/javascript" src="https://rasa.com/assets/js/klaro_config.js"></script>
  <script defer type="text/javascript" src="https://rasa.com/assets/js/klaro.js"></script>
  <script defer type="text/javascript" src="../../_static/ace/src-min-noconflict/ace.js"></script>
  <script defer type="text/javascript" src="../../_static/chatblock/rasa-chatblock.min.js"></script>
  <script type="text/javascript" src="https://storage.googleapis.com/docs-theme/clipboard.min.js"></script>
  
    <link rel="icon" sizes="192x192" href="../../_static/icon-192x192.png">
    <link rel="apple-touch-icon" href="../../_static/icon-192x192.png" />
  
  
    
      <link rel="canonical" href="https://rasa.com/docs/rasa/api/tensorflow_usage/"/>
    
  


  </head><body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe data-name="analytics" data-src="https://www.googletagmanager.com/ns.html?id=GTM-MMHSZCS" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="announce-bar" role="banner">
  These docs are for version 1.x of Rasa Open Source.
  <a href="https://rasa.com/docs/rasa/">Docs for the new version 2.0 can be found here.</a>
</div>

<div class="nav-top">
  <div class="nav-container">
    <ul class="main-nav nav">
      <li>
      <a href="https://rasa.com/docs/" class="brand-link">
          <img src="../../_static/rasa_logo.svg" width="80px" height="40px" title="Rasa logo" alt="Rasa logo">
    	    <span class="logo extension">docs</span>
    	</a>
      </li>
    </ul>
    <ul class="secondary-nav nav">
      <li>
        <a href="https://github.com/rasaHQ/" target="_blank"><button class="button btn-ghost white"> <i class="fab fa-github"></i>GitHub</button></a>
      </li>
      <li>
        <a href="https://forum.rasa.com" target="_blank"><button class="button"><i class="fas fa-comments"></i> Ask the Community</button></a>
      </li>
    </ul>
  </div>
</div>

  
    
      <div class="sidebar-extended"></div>
    
  

  
    
      <div class="document">
    
  

    
      
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/installation/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/rasa-tutorial/">Tutorial: Rasa Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/building-assistants/">Tutorial: Building Assistants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/command-line-interface/">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/messaging-and-voice-channels/">Messaging and Voice Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/testing-your-assistant/">Testing Your Assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/validate-files/">Validate Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/configuring-http-api/">Configuring the HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/how-to-deploy/">Deploying Your Rasa Assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/cloud-storage/">Cloud Storage</a></li>
</ul>
<p class="caption"><span class="caption-text">NLU</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/about/">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/using-nlu-only/">Using NLU Only</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/training-data-format/">Training Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/language-support/">Language Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/choosing-a-pipeline/">Choosing a Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/components/">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/entity-extraction/">Entity Extraction</a></li>
</ul>
<p class="caption"><span class="caption-text">Core</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core/about/">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/stories/">Stories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/domains/">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/responses/">Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/actions/">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/reminders-and-external-events/">Reminders and External Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/policies/">Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/slots/">Slots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/forms/">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/retrieval-actions/">Retrieval Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/interactive-learning/">Interactive Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/fallback-actions/">Fallback Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/knowledge-bases/">Knowledge Base Actions</a></li>
</ul>
<p class="caption"><span class="caption-text">Conversation Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/dialogue-elements/">Dialogue Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/small-talk/">Small Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/completing-tasks/">Completing Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/guiding-users/">Guiding Users</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../action-server/">Action Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http-api/">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter-notebooks/">Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agent/">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../custom-nlu-components/">Custom NLU Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rasa-sdk/">Rasa SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../events/">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tracker/">Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tracker-stores/">Tracker Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../event-brokers/">Event Brokers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lock-stores/">Lock Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training-data-importers/">Training Data Importers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-featurization/">Featurization of Conversations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">TensorFlow Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guide/">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/">Rasa Open Source Change Log</a></li>
</ul>
<p class="caption"><span class="caption-text">Migrate from (beta)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/google-dialogflow-to-rasa/">Dialogflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/facebook-wit-ai-to-rasa/">Wit.ai</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/microsoft-luis-to-rasa/">LUIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/ibm-watson-to-rasa/">IBM Watson</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a></li>
</ul>

<div class="versions">
    <p class="caption">Versions</p>
    <div class="versions-content">
      <div>
        <span class="current-version">
          viewing: 1.9.0
        </span>
      </div>
      <div class="other-versions">
          <p>tags</p>
          <div class="dropdown-content">
              <a href="../../../1.10.18/api/tensorflow_usage/">1.10.18</a>
              <a href="../../../1.10.17/api/tensorflow_usage/">1.10.17</a>
              <a href="../../../1.10.16/api/tensorflow_usage/">1.10.16</a>
              <a href="../../../1.10.15/api/tensorflow_usage/">1.10.15</a>
              <a href="../../../1.10.14/api/tensorflow_usage/">1.10.14</a>
              <a href="../../../1.10.13/api/tensorflow_usage/">1.10.13</a>
              <a href="../../../1.10.12/api/tensorflow_usage/">1.10.12</a>
              <a href="../../../1.10.11/api/tensorflow_usage/">1.10.11</a>
              <a href="../../../1.10.10/api/tensorflow_usage/">1.10.10</a>
              <a href="../../../1.10.9/api/tensorflow_usage/">1.10.9</a>
              <a href="../../../1.10.8/api/tensorflow_usage/">1.10.8</a>
              <a href="../../../1.10.7/api/tensorflow_usage/">1.10.7</a>
              <a href="../../../1.10.6/api/tensorflow_usage/">1.10.6</a>
              <a href="../../../1.10.5/api/tensorflow_usage/">1.10.5</a>
              <a href="../../../1.10.4/api/tensorflow_usage/">1.10.4</a>
              <a href="../../../1.10.3/api/tensorflow_usage/">1.10.3</a>
              <a href="../../../1.10.2/api/tensorflow_usage/">1.10.2</a>
              <a href="../../../1.10.1/api/tensorflow_usage/">1.10.1</a>
              <a href="../../../1.10.0/api/tensorflow_usage/">1.10.0</a>
              <a href="../../../1.9.7/api/tensorflow_usage/">1.9.7</a>
              <a href="../../../1.9.6/api/tensorflow_usage/">1.9.6</a>
              <a href="../../../1.9.5/api/tensorflow_usage/">1.9.5</a>
              <a href="../../../1.9.4/api/tensorflow_usage/">1.9.4</a>
              <a href="../../../1.9.3/api/tensorflow_usage/">1.9.3</a>
              <a href="../../../1.9.2/api/tensorflow_usage/">1.9.2</a>
              <a href="../../../1.9.1/api/tensorflow_usage/">1.9.1</a>
              <a href="../../../1.9.0/api/tensorflow_usage/">1.9.0</a>
              <a href="../../../1.8.3/api/tensorflow_usage/">1.8.3</a>
              <a href="../../../1.8.2/api/tensorflow_usage/">1.8.2</a>
              <a href="../../../1.8.1/api/tensorflow_usage/">1.8.1</a>
              <a href="../../../1.8.0/api/tensorflow_usage/">1.8.0</a>
              <a href="../../../1.7.4/index/">1.7.4</a>
              <a href="../../../1.7.3/index/">1.7.3</a>
              <a href="../../../1.7.2/index/">1.7.2</a>
              <a href="../../../1.7.1/index/">1.7.1</a>
              <a href="../../../1.7.0/index/">1.7.0</a>
              <a href="../../../1.6.2/index/">1.6.2</a>
              <a href="../../../1.5.3/index/">1.5.3</a>
              <a href="../../../1.4.6/index/">1.4.6</a>
              <a href="../../../1.3.10/index/">1.3.10</a>
              <a href="../../../1.2.9/index/">1.2.9</a>
          </div>
      </div>
    </div>
</div>


        </div>
      </div>
      
    
      
        
      
        <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  


    
    



    <p class="scv-banner"><a href="../../../1.10.18/api/tensorflow_usage/"><b>Warning:</b> This document is for an old version of Rasa. The latest version is 1.10.18.</a></p>
<div class="section" id="tensorflow-configuration">
<span id="tensorflow-usage"></span><h1>TensorFlow Configuration<a class="headerlink" href="#tensorflow-configuration" title="Permalink to this headline">¶</a></h1>
<p>TensorFlow allows configuring options in the runtime environment via
<a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/config">TF Config submodule</a>. Rasa Open Source supports a smaller subset of these
configuration options and makes appropriate calls to the <code class="docutils literal notranslate"><span class="pre">tf.config</span></code> submodule.
This smaller subset comprises of configurations that developers frequently use with Rasa Open Source.
All configuration options are specified using environment variables as shown in subsequent sections.</p>
<div class="section" id="optimizing-cpu-performance">
<h2>Optimizing CPU Performance<a class="headerlink" href="#optimizing-cpu-performance" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We recommend that you configure these options only if you are an advanced TensorFlow user and understand the
implementation of the machine learning components in your pipeline. These options affect how operations are carried
out under the hood in Tensorflow. Leaving them at their default values is fine.</p>
</div>
<p>Depending on the TensorFlow operations a NLU component or Core policy uses, you can leverage multi-core CPU
parallelism by tuning these options.</p>
<div class="section" id="parallelizing-one-operation">
<h3>Parallelizing One Operation<a class="headerlink" href="#parallelizing-one-operation" title="Permalink to this headline">¶</a></h3>
<p>Set <code class="docutils literal notranslate"><span class="pre">TF_INTRA_OP_PARALLELISM_THREADS</span></code> as an environment variable to specify the maximum number of threads that can be used
to parallelize the execution of one operation. For example, operations like <code class="docutils literal notranslate"><span class="pre">tf.matmul()</span></code> and <code class="docutils literal notranslate"><span class="pre">tf.reduce_sum</span></code> can be executed
on multiple threads running in parallel. The default value for this variable is <code class="docutils literal notranslate"><span class="pre">0</span></code> which means TensorFlow would
allocate one thread per CPU core.</p>
</div>
<div class="section" id="parallelizing-multiple-operations">
<h3>Parallelizing Multiple Operations<a class="headerlink" href="#parallelizing-multiple-operations" title="Permalink to this headline">¶</a></h3>
<p>Set <code class="docutils literal notranslate"><span class="pre">TF_INTER_OP_PARALLELISM_THREADS</span></code> as an environment variable to specify the maximum number of threads that can be used
to parallelize the execution of multiple <strong>non-blocking</strong> operations. These would include operations that do not have a
directed path between them in the TensorFlow graph. In other words, the computation of one operation does not affect the
computation of the other operation. The default value for this variable is <code class="docutils literal notranslate"><span class="pre">0</span></code> which means TensorFlow would allocate one thread per CPU core.</p>
<p>To understand more about how these two options differ from each other, refer to this
<a class="reference external" href="https://stackoverflow.com/a/41233901/3001665">stackoverflow thread</a>.</p>
</div>
</div>
<div class="section" id="optimizing-gpu-performance">
<h2>Optimizing GPU Performance<a class="headerlink" href="#optimizing-gpu-performance" title="Permalink to this headline">¶</a></h2>
<div class="section" id="limiting-gpu-memory-growth">
<h3>Limiting GPU Memory Growth<a class="headerlink" href="#limiting-gpu-memory-growth" title="Permalink to this headline">¶</a></h3>
<p>TensorFlow by default blocks all the available GPU memory for the running process. This can be limiting if you are running
multiple TensorFlow processes and want to distribute memory across them. To prevent Rasa Open Source from blocking all
of the available GPU memory, set the environment variable <code class="docutils literal notranslate"><span class="pre">TF_FORCE_GPU_ALLOW_GROWTH</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</div>
<div class="section" id="restricting-absolute-gpu-memory-available">
<h3>Restricting Absolute GPU Memory Available<a class="headerlink" href="#restricting-absolute-gpu-memory-available" title="Permalink to this headline">¶</a></h3>
<p>You may want to limit the absolute amount of GPU memory that can be used by a Rasa Open Source process.</p>
<p>For example, say you have two visible GPUs(<code class="docutils literal notranslate"><span class="pre">GPU:0</span></code> and <code class="docutils literal notranslate"><span class="pre">GPU:1</span></code>) and you want to allocate 1024 MB from the first GPU
and 2048 MB from the second GPU. You can do this by setting the environment variable <code class="docutils literal notranslate"><span class="pre">TF_GPU_MEMORY_ALLOC</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;0:1024,</span> <span class="pre">1:2048&quot;</span></code>.</p>
</div>
</div>
</div>


          </div>

          <div class="footer">
            <div class="questions">
              Stuck?
              <a class="reference external" href="https://forum.rasa.com" target="_blank">Ask a Question</a>
              or
              <a class="reference external" href="https://github.com/rasahq/rasa/issues" target="_blank">Create an Issue</a>
            </div>
            <div class="social">
              <a href="https://github.com/RasaHQ" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
              <a href="https://stackoverflow.com/search?q=rasa" target="_blank" title="Stack Overflow"><i class="fab fa-stack-overflow"></i></a>
              <a href="https://www.youtube.com/channel/UCJ0V6493mLvqdiVwOKWBODQ" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
              <a href="https://twitter.com/rasa_hq" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>
            </div>

            <div class="copyright small">
            &copy;2020, Rasa Technologies | <a href="https://rasa.com/imprint/" target="_blank">Imprint</a> | <a href="https://rasa.com/privacy-policy/" target="_blank">Privacy Policy</a>
            
            </div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>