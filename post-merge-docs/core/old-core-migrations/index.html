
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Migration Guide</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/banner.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/button.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />

  <!-- Google Tag Manager -->
  <script type="application/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MMHSZCS');</script>
  <!-- End Google Tag Manager -->
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
  <meta itemprop="image" content="https://rasa.com/assets/img/facebook-og.png">
  <meta property="og:title" content="Migration Guide" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rasa.com/assets/img/facebook-og.png" />
  <meta property="og:url" content="https://rasa.com/docs/rasa/core/old-core-migrations" />
  
    <meta name="description" content="Information about changes between major versions of chatbot framework
Rasa Core and how you can migrate from one version to another." />
    <meta itemprop="description" content="Information about changes between major versions of chatbot framework
Rasa Core and how you can migrate from one version to another.">
    <meta name="twitter:description" content="Information about changes between major versions of chatbot framework
Rasa Core and how you can migrate from one version to another." />
    <meta property="og:description" content="Information about changes between major versions of chatbot framework
Rasa Core and how you can migrate from one version to another." />
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Rasa_HQ">
  <meta name="twitter:title" content="Migration Guide">
  <meta name="twitter:creator" content="@Rasa_HQ">
  <meta name="twitter:image" content="https://rasa.com/assets/img/facebook-og.png">

  <link rel="stylesheet" href="../../_static/xq-light.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/fontawesome/css/fontawesome-all.css" type="text/css" />
  <script type="text/javascript" src="https://storage.googleapis.com/docs-theme/clipboard.min.js"></script>
  
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


  </head><body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MMHSZCS" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="nav-top">
  <div class="nav-container">
    <ul>
      <li>
    	<a href="/unmerged-docs/html" class="brand-link">
    	    <h1 class="brand">
    	        <img src="../../_static/rasa_logo.svg" width="80px" height="40px" title="Rasa logo" alt="Rasa logo">
    	    </h1>
    	    <span class="logo extension">docs</span>
    	</a>
      </li>
      	
          
      	    <li><a href=/unmerged-docs/html/getting-started/index.html>Getting Started</a></li>
      	  
      	
          
      	    <li class="active"><a href=/unmerged-docs/html/rasa/index.html>Rasa</a></li>
      	  
      	
          
      	    <li><a href=/unmerged-docs/html/rasa-x/index.html>Rasa X</a></li>
      	  
      	
    </ul>
    <ul class="nav">
      <input type="text" class="search" placeholder="Search">
      <li>
        <a href="https://github.com/rasaHQ/" target="_blank"><button class="button btn-ghost btn-small"> <i class="fab fa-github"></i>GitHub</button></a>
      </li>

      <li>
        <a href="https://forum.rasa.com" target="_blank"><button class="button btn-small">Ask the Community</button></a>
      </li>

    </ul>
  </div>
</div>

  
    
      <div class="sidebar-extended"></div>
    
  

  <div class="document">
    
      
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../project-structure/">Project Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../command-line-interface/">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../channels/">Messaging and Voice Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../evaluating-models/">Evaluating Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../server/">Running the Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud-storage/">Storing Models in the Cloud</a></li>
</ul>
<p class="caption"><span class="caption-text">NLU</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/data-format/">Training Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/choosing-pipeline/">Choosing a Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/languages/">Language Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/entities/">Entity Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/components/">Component Configuration</a></li>
</ul>
<p class="caption"><span class="caption-text">Core</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../stories/">Story Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../domains/">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../responses/">Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../run-code-in-custom-actions/">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../policies/">Training and Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slots/">Using Slots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slot-filling/">Slot Filling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive-learning/">Interactive Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fallbacks/">Fallback Actions</a></li>
</ul>
<p class="caption"><span class="caption-text">Conversation Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/about/">Dialogue Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/small-talk/">Small Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/completing-tasks/">Completing Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/guiding-users/">Guiding Users</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/action-server/">Action Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/rasa-http-api/">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/jupyter/">Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/agent/">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/custom-nlu-components/">Custom NLU Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/events/">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tracker/">Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tracker-stores/">Tracker Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/brokers/">Event Brokers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/featurizer/">Featurization</a></li>
</ul>

<div class="versions">
    <p class="caption">Versions</p>
    <div class="versions-content">
      <div>
        <span class="current-version">
          viewing: post-merge-docs
        </span>
      </div>
      <div class="other-versions">
          <p>branches</p>
          <div class="dropdown-content">
              <a href="../../../post-merge-docs/core/old-core-migrations/">post-merge-docs</a>
          </div>
      </div>
    </div>
</div>


        </div>
      </div>
      
    
      
        
      
        <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="migration-guide">
<span id="old-core-migrations"></span><h1>Migration Guide<a class="headerlink" href="#migration-guide" title="Permalink to this headline">¶</a></h1>
<p>This page contains information about changes between major versions and
how you can migrate from one version to another.</p>
<p id="migration-to-0-14-0">0.13.x to 0.14.0</p>
<div class="section" id="general">
<h2>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">The python package has a new name, as does the module. You should install
the package using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">rasa</span></code> (instead of <code class="docutils literal notranslate"><span class="pre">rasa_core</span></code>).</p>
<p>The code moved from <code class="docutils literal notranslate"><span class="pre">rasa_core</span></code> to <code class="docutils literal notranslate"><span class="pre">rasa.core</span></code> - best way to fix is a
search and replace for the two most common usages:
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">rasa_core</span></code> and <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">rasa_core</span></code>.</p>
<p>We have added a backwards compatibility package to still allow you to import
from <code class="docutils literal notranslate"><span class="pre">rasa_core</span></code>, this will emit a warning but all imports will still
work. Nevertheless, you should do the above renaming of any access
to <code class="docutils literal notranslate"><span class="pre">rasa_core</span></code>.</p>
</li>
</ul>
<dl class="docutils">
<dt>-The <cite>MappingPolicy</cite> is now included in <cite>default_config.yml</cite>. If you are using</dt>
<dd>a custom policy configuration make sure to update it appropriately.</dd>
</dl>
<ul class="simple">
<li>deprecated <code class="docutils literal notranslate"><span class="pre">remote.py</span></code> got removed - the API should be consumed directly
instead or with the help of the <code class="docutils literal notranslate"><span class="pre">rasa_core_sdk</span></code>.</li>
</ul>
</div>
<div class="section" id="asynchronous-first">
<h2>Asynchronous First<a class="headerlink" href="#asynchronous-first" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>No more flask.</strong> The flask webserver has been replaced with an asyncronous
webserver called Sanic. If you run the server in production using a wsgi
runner, there are instructions here on how to recreate that with the
sanic webserver:
<a class="reference external" href="https://sanic.readthedocs.io/en/latest/sanic/deploying.html#running-via-gunicorn">https://sanic.readthedocs.io/en/latest/sanic/deploying.html#running-via-gunicorn</a></li>
<li><strong>Agent</strong>: some of the method signatures changed from normal functions to
async coroutines. These functions need to be awaited when called, e.g.
<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">agent.handle_message(...)</span></code>. Changed functions include
- <code class="docutils literal notranslate"><span class="pre">handle_message</span></code>
- <code class="docutils literal notranslate"><span class="pre">handle_text</span></code>
- <code class="docutils literal notranslate"><span class="pre">log_message</span></code>
- <code class="docutils literal notranslate"><span class="pre">execute_action</span></code>
- <code class="docutils literal notranslate"><span class="pre">load_data</span></code>
- <code class="docutils literal notranslate"><span class="pre">visualize</span></code></li>
</ul>
</div>
<div class="section" id="custom-input-output-channels">
<h2>Custom Input / Output Channels<a class="headerlink" href="#custom-input-output-channels" title="Permalink to this headline">¶</a></h2>
<p>If you wrote your own input output channels, there are a couple of changes
necessary to make the channels work properly with the asyncio server operation:</p>
<ul>
<li><p class="first"><strong>Need to provide Sanic blueprints.</strong> To make the server fully asynchronous
the input channels need to provide Sanic blueprints instead of flask
blueprints. Imports should change from
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">flask</span> <span class="pre">import</span> <span class="pre">Blueprint,</span> <span class="pre">request</span></code> to
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">sanic</span> <span class="pre">import</span> <span class="pre">Blueprint,</span> <span class="pre">response</span></code>. All route functions, e.g.
<code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">webhook(...)</span></code> need to be async and accept a request parameter as
their first argument, e.g. <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">webhook(request,</span> <span class="pre">...)</span></code>.</p>
<p>Calls to <code class="docutils literal notranslate"><span class="pre">on_new_message(...)</span></code> need to be awaited:
<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">on_new_message(...)</span></code>.</p>
<p>All output channel functions need to be async:
<code class="docutils literal notranslate"><span class="pre">send_text_message</span></code>, <code class="docutils literal notranslate"><span class="pre">send_image_url</span></code>, <code class="docutils literal notranslate"><span class="pre">send_attachment</span></code>,
<code class="docutils literal notranslate"><span class="pre">send_response</span></code>, <code class="docutils literal notranslate"><span class="pre">send_text_with_buttons</span></code> and <code class="docutils literal notranslate"><span class="pre">send_custom_message</span></code>.
And all internal calls to these methods need to be awaited.</p>
<p>For inspiration, feel free to check the code of the existing channels.</p>
</li>
</ul>
</div>
<div class="section" id="function-naming">
<h2>Function Naming<a class="headerlink" href="#function-naming" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>renamed <code class="docutils literal notranslate"><span class="pre">train_dialogue_model</span></code> to <code class="docutils literal notranslate"><span class="pre">train</span></code>. Please use <code class="docutils literal notranslate"><span class="pre">train</span></code> from
now on.</li>
<li>renamed <code class="docutils literal notranslate"><span class="pre">rasa_core.evaluate</span></code> to <code class="docutils literal notranslate"><span class="pre">rasa_core.test</span></code>. Please use <code class="docutils literal notranslate"><span class="pre">test</span></code>
from now on.</li>
</ul>
<div class="section" id="x-to-0-13-0">
<span id="migration-to-0-13-0"></span><h3>0.12.x to 0.13.0<a class="headerlink" href="#x-to-0-13-0" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Python 2 support has now been completely dropped: to upgrade to
this version you <strong>must use Python 3</strong>.  As always, <strong>make sure</strong>
<strong>you retrain your models when switching to this version</strong></p>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>General<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Support for Python 2 has now been completely removed from Rasa Core, please
upgrade to Python 3.5 or 3.6 to continue using the software</li>
<li>If you were using the deprecated intent/entity format (<code class="docutils literal notranslate"><span class="pre">_intent[entity1=val1,</span> <span class="pre">entity=val2]</span></code>),
then you will have to update your training data to the standard format
(<code class="docutils literal notranslate"><span class="pre">/intent{&quot;entity1&quot;:</span> <span class="pre">val1,</span> <span class="pre">&quot;entity2&quot;:</span> <span class="pre">val2</span></code>} because it is no longer supported</li>
</ul>
<div class="section" id="x-to-0-12-0">
<span id="migration-to-0-12-0"></span><h3>0.11.x to 0.12.0<a class="headerlink" href="#x-to-0-12-0" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is major new version with a lot of changes under the hood as well
as on the API level. Please take a careful look at the mentioned
before updating. Please make sure to
<strong>retrain your models when switching to this version</strong>.</p>
</div>
</div>
</div>
<div class="section" id="train-script">
<h2>Train script<a class="headerlink" href="#train-script" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>You <strong>must</strong> pass a policy config flag with <code class="docutils literal notranslate"><span class="pre">-c/--config</span></code> now when training
a model, see <a class="reference internal" href="../policies/#policy-file"><span class="std std-ref">Configuring Policies</span></a>. There is a default config file in the
documentation <span class="xref std std-ref">default_config</span>.</li>
<li>Interactive learning is now started with
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">rasa_core.train</span> <span class="pre">interactive</span></code> rather than the
<code class="docutils literal notranslate"><span class="pre">--interactive</span></code> flag</li>
<li>All policy configuration related flags have been removed (<code class="docutils literal notranslate"><span class="pre">--epochs</span></code>,
<code class="docutils literal notranslate"><span class="pre">--max_history</span></code>, <code class="docutils literal notranslate"><span class="pre">--validation_split</span></code>, <code class="docutils literal notranslate"><span class="pre">--batch_size</span></code>,
<code class="docutils literal notranslate"><span class="pre">--nlu_threshold</span></code>, <code class="docutils literal notranslate"><span class="pre">--core_threshold</span></code>,
<code class="docutils literal notranslate"><span class="pre">--fallback_action_name</span></code>), specify these in the policy config file instead,
see <a class="reference internal" href="../policies/#policy-file"><span class="std std-ref">Configuring Policies</span></a></li>
</ul>
</div>
<div class="section" id="visualisation-script">
<h2>Visualisation script<a class="headerlink" href="#visualisation-script" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>You <strong>must</strong> pass a policy config flag with <code class="docutils literal notranslate"><span class="pre">-c/--config</span></code> now,
see <a class="reference internal" href="../policies/#policy-file"><span class="std std-ref">Configuring Policies</span></a>. There is a default config file in the
documentation <span class="xref std std-ref">default_config</span>.</li>
</ul>
</div>
<div class="section" id="evaluation-script">
<h2>Evaluation script<a class="headerlink" href="#evaluation-script" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">--output</span></code> flag now takes one argument: the name of the folder
any files generated from the script should be written to</li>
<li>The <code class="docutils literal notranslate"><span class="pre">--failed</span></code> flag was removed, as this is part of the <code class="docutils literal notranslate"><span class="pre">--output</span></code>
flag now</li>
</ul>
</div>
<div class="section" id="forms">
<h2>Forms<a class="headerlink" href="#forms" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Forms were completely reworked, please follow <span class="xref std std-ref">slotfilling</span>
for instructions how to use them.</li>
<li><code class="docutils literal notranslate"><span class="pre">FormField</span></code> class and its subclasses were removed,
overwrite <code class="docutils literal notranslate"><span class="pre">FormAction.slot_mapping()</span></code> method to specify the mapping between
user input and requested slot in the form
utilizing helper methods <code class="docutils literal notranslate"><span class="pre">FormAction.from_entity(...)</span></code>,
<code class="docutils literal notranslate"><span class="pre">FormAction.from_intent(...)</span></code> and <code class="docutils literal notranslate"><span class="pre">FormAction.from_text(...)</span></code></li>
<li>stories for forms need to be written differently,
it is recommended to use interactive learning to create form stories</li>
<li>functionality of <code class="docutils literal notranslate"><span class="pre">FormAction.get_other_slots(...)</span></code> was moved to
<code class="docutils literal notranslate"><span class="pre">FormAction.extract_other_slots(...)</span></code></li>
<li>functionality of <code class="docutils literal notranslate"><span class="pre">FormAction.get_requested_slot(...)</span></code> was moved to
<code class="docutils literal notranslate"><span class="pre">FormAction.extract_requested_slot(...)</span></code></li>
<li>overwrite <code class="docutils literal notranslate"><span class="pre">FormAction.validate(...)</span></code> method to validate user input against
the slot requested by the form</li>
</ul>
<div class="section" id="x-to-0-11-0">
<span id="migration-to-0-11-0"></span><h3>0.10.x to 0.11.0<a class="headerlink" href="#x-to-0-11-0" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is major new version with a lot of changes under the hood as well
as on the API level. Please take a careful look at the mentioned
before updating. Please make sure to
<strong>retrain your models when switching to this version</strong>.</p>
</div>
</div>
</div>
<div class="section" id="id2">
<h2>General<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">TL;DR these are the most important surface changes. But if you have
a second please take a minute to read all of them.</p>
</div>
<ul class="simple">
<li>If you have custom actions, you now need to run a separate server to execute
them. If your actions are written in python (in a file called actions.py) you
can do this by running <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">rasa_core_sdk.endpoint</span> <span class="pre">--actions</span> <span class="pre">actions</span></code>
and specifying the action endpoint in the <code class="docutils literal notranslate"><span class="pre">endpoints.yml</span></code>
For more information please read <span class="xref std std-ref">customactions</span>.</li>
<li>For your custom actions, the imports have changed from
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">rasa_core.actions</span> <span class="pre">import</span> <span class="pre">Action</span></code> to <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">rasa_core_sdk</span> <span class="pre">import</span> <span class="pre">Action</span></code> and
from <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">rasa_core.events</span> <span class="pre">import</span> <span class="pre">*</span></code> to <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">rasa_core_sdk.events</span> <span class="pre">import</span> <span class="pre">*</span></code></li>
<li>The actions list in the domain now needs to always contain the actions names
instead of the classpath (e.g. change <code class="docutils literal notranslate"><span class="pre">actions.ActionExample</span></code> to <code class="docutils literal notranslate"><span class="pre">action_example</span></code>)</li>
<li>utter templates that should be used as actions, now need to start with
<code class="docutils literal notranslate"><span class="pre">utter_</span></code>, otherwise the bot won’t be able to find the action</li>
</ul>
</div>
<div class="section" id="http-server-endpoints">
<h2>HTTP Server endpoints<a class="headerlink" href="#http-server-endpoints" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>We removed <code class="docutils literal notranslate"><span class="pre">/parse</span></code> and <code class="docutils literal notranslate"><span class="pre">/continue</span></code> endpoints used for running actions
remotely. This has been replaced by the action server that allows you
to run your action code in any language. There are no replacement endpoints
for these two, as the flow of information has been changed: Instead of you
calling Rasa Core to update the tracker and receive the next action to be
executed, Rasa Core will call your action server once it predicted an action.
More information can be found in the updated docs for <span class="xref std std-ref">customactions</span>.</li>
</ul>
</div>
<div class="section" id="webhooks">
<h2>Webhooks<a class="headerlink" href="#webhooks" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">The endpoints for the webhooks changed. All webhooks are now at
<code class="docutils literal notranslate"><span class="pre">/webhooks/CHANNEL_NAME/webhook</span></code>. For example, the webhook
to receive facebook messages on a local instance is now
<code class="docutils literal notranslate"><span class="pre">http://localhost:5005/webhooks/facebook/webhook</span></code>.</p>
</li>
<li><p class="first">format of the <code class="docutils literal notranslate"><span class="pre">credentials.yml</span></code> used in the <code class="docutils literal notranslate"><span class="pre">run</span></code> and <code class="docutils literal notranslate"><span class="pre">server</span></code> scripts
has changed to allow for multiple channels in one file:</p>
<p>The new format now contains the channels name first, e.g. for facebook:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">facebook</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">verify</span><span class="p p-Indicator">:</span> <span class="s">&quot;rasa-bot&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">secret</span><span class="p p-Indicator">:</span> <span class="s">&quot;3e34709d01ea89032asdebfe5a74518&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">page-access-token</span><span class="p p-Indicator">:</span> <span class="s">&quot;EAAbHPa7H9rEBAAuFk4Q3gPKbDedQnx4djJJ1JmQ7CAqO4iJKrQcNT0wtD&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="changes-to-input-and-output-channels">
<h2>Changes to Input and Output Channels<a class="headerlink" href="#changes-to-input-and-output-channels" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">ConsoleOutputChannel</span></code> and <code class="docutils literal notranslate"><span class="pre">ConsoleInputChannel</span></code> have been removed. Either
use the <a class="reference external" href="https://github.com/RasaHQ/rasa_core/blob/master/rasa_core/run.py">run script</a>
to run your bot on the cmdline, or adapt the <code class="docutils literal notranslate"><span class="pre">serve_application</span></code>
<a class="reference external" href="https://github.com/RasaHQ/rasa_core/blob/master/rasa_core/run.py#L260">function</a>
to run from a python script.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">rasa_core.channels.direct</span></code> output channel package removed.
<code class="docutils literal notranslate"><span class="pre">CollectingOutputChannel</span></code> moved to <code class="docutils literal notranslate"><span class="pre">rasa_core.channels.channel</span></code></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">HttpInputComponent</span></code> renamed to <code class="docutils literal notranslate"><span class="pre">InputChannel</span></code> &amp; moved to
<code class="docutils literal notranslate"><span class="pre">rasa_core.channels.channel.InputChannel</span></code></p>
</li>
<li><p class="first">If you wrote your own custom input channel, make sure to inherit from
<code class="docutils literal notranslate"><span class="pre">InputChannel</span></code> instead of <code class="docutils literal notranslate"><span class="pre">HttpInputComponent</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">CollectingOutput</span></code> channel will no properly collect events for images,
buttons, and attachments. The content of the collected messages has changed,
<code class="docutils literal notranslate"><span class="pre">data</span></code> is now called <code class="docutils literal notranslate"><span class="pre">buttons</span></code>.</p>
</li>
<li><p class="first">removed package <code class="docutils literal notranslate"><span class="pre">rasa_core.channels.rest</span></code>,
please use <code class="docutils literal notranslate"><span class="pre">rasa_core.channels.RestInput</span></code> instead</p>
</li>
<li><p class="first">remove file input channel <code class="docutils literal notranslate"><span class="pre">rasa_core.channels.file.FileInputChannel</span></code></p>
</li>
<li><p class="first">signature of <code class="docutils literal notranslate"><span class="pre">agent.handle_channel</span></code> got renamed
and the signature changed. here is an up to date example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core.channels.facebook</span> <span class="kn">import</span> <span class="n">FacebookInput</span>

<span class="n">input_channel</span> <span class="o">=</span> <span class="n">FacebookInput</span><span class="p">(</span><span class="n">fb_verify</span><span class="o">=</span><span class="s2">&quot;VERIFY&quot;</span><span class="p">,</span>
                              <span class="n">fb_secret</span><span class="o">=</span><span class="s2">&quot;SECRET&quot;</span><span class="p">,</span>
                              <span class="n">fb_access_token</span><span class="o">=</span><span class="s2">&quot;ACCESS_TOKEN&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">handle_channels</span><span class="p">([</span><span class="n">input_channel</span><span class="p">],</span> <span class="n">port</span><span class="o">=</span><span class="mi">5005</span><span class="p">,</span> <span class="n">serve_forever</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">If you wrote your own custom output channel, make sure to split messages
on double new lines if you like (the <code class="docutils literal notranslate"><span class="pre">InputChannel</span></code> you inherit from
doesn’t do this anymore), e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">send_text_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipient_id</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="c1"># type: (Text, Text) -&gt; None</span>
    <span class="sd">&quot;&quot;&quot;Send a message through this channel.&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">message_part</span> <span class="ow">in</span> <span class="n">message</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">):</span>
      <span class="c1"># self.send would be the actual communication to e.g. facebook</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">recipient_id</span><span class="p">,</span> <span class="n">message_part</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<div class="section" id="x-to-0-10-0">
<span id="migration-to-0-10-0"></span><h3>0.9.x to 0.10.0<a class="headerlink" href="#x-to-0-10-0" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is a release <strong>breaking backwards compatibility</strong>.
You can no longer load old models with this version, due to the addition of
the default action <code class="docutils literal notranslate"><span class="pre">ActionDefaultFallback</span></code>. Please make sure to retrain
your model before using this version</p>
</div>
<p>There have been some API changes to classes and methods:</p>
<ul>
<li><p class="first">if you use <code class="docutils literal notranslate"><span class="pre">dispatcher.utter_template</span></code> or
<code class="docutils literal notranslate"><span class="pre">dispatcher.utter_button_template</span></code> in your custom actions run code,
they now need the <code class="docutils literal notranslate"><span class="pre">tracker</span></code> as a second argument, e.g.
<code class="docutils literal notranslate"><span class="pre">dispatcher.utter_template(&quot;utter_greet&quot;,</span> <span class="pre">tracker)</span></code></p>
</li>
<li><p class="first">all input and output channels should have a <code class="docutils literal notranslate"><span class="pre">name</span></code>. If you are using a
custom channel, make sure to implement a class method that returns
the name. The name needs to be added to the
<strong>input channel and the output channel</strong>. You can find examples
in <code class="docutils literal notranslate"><span class="pre">rasa_core.channels.direct.CollectingOutputChannel</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Every channel needs a name&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;collector&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">the <code class="docutils literal notranslate"><span class="pre">RasaNLUHttpInterpreter</span></code> when created now needs to be passed an
instance of <code class="docutils literal notranslate"><span class="pre">EndpointConfig</span></code> instead of <code class="docutils literal notranslate"><span class="pre">server</span></code> and <code class="docutils literal notranslate"><span class="pre">token</span></code>, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core.utils</span> <span class="kn">import</span> <span class="n">EndpointConfig</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="n">EndpointConfig</span><span class="p">(</span><span class="s2">&quot;http://localhost:500&quot;</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="s2">&quot;mytoken&quot;</span><span class="p">)</span>
<span class="n">interpreter</span> <span class="o">=</span> <span class="n">RasaNLUHttpInterpreter</span><span class="p">(</span><span class="s2">&quot;mymodelname&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="x-to-0-9-0">
<span id="migration-to-0-9-0"></span><h3>0.8.x to 0.9.0<a class="headerlink" href="#x-to-0-9-0" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is a release <strong>breaking backwards compatibility</strong>.
Unfortunately, it is not possible to load
previously trained models (as the stored file formats have changed as
well as the configuration and metadata). Please make sure to retrain
a model before trying to use it with this improved version.</p>
</div>
<ul>
<li><p class="first">loading data should be done either using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core</span> <span class="kn">import</span> <span class="n">training</span>

<span class="n">training_data</span> <span class="o">=</span> <span class="n">training</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>or using an agent instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">training_data</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">training_data</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>It is deprecated to pass the training data file directly to <code class="docutils literal notranslate"><span class="pre">agent.train</span></code>.
Instead, the data should be loaded in one of the above ways and then passed
to train.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">ScoringPolicy</span></code> got removed and replaced by <code class="docutils literal notranslate"><span class="pre">AugmentedMemoizationPolicy</span></code>
which is similar, but is able to match more states to states it has seen
during trainer (e.g. it is able to handle slots better)</p>
</li>
<li><p class="first">if you use custom featurizers, you need to
<strong>pass them directly to the policy</strong> that should use them.
This allows the policies to use different featurizers. Passing a featurizer
is <strong>optional</strong>. Accordingly, the <code class="docutils literal notranslate"><span class="pre">max_history</span></code> parameter moved to that
featurizer:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core.featurizers</span> <span class="kn">import</span> <span class="p">(</span><span class="n">MaxHistoryTrackerFeaturizer</span><span class="p">,</span>
                                   <span class="n">BinarySingleStateFeaturizer</span><span class="p">)</span>

<span class="n">featurizer</span> <span class="o">=</span> <span class="n">MaxHistoryTrackerFeaturizer</span><span class="p">(</span><span class="n">BinarySingleStateFeaturizer</span><span class="p">(),</span>
                                         <span class="n">max_history</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">domain_file</span><span class="p">,</span>
              <span class="n">policies</span><span class="o">=</span><span class="p">[</span><span class="n">MemoizationPolicy</span><span class="p">(</span><span class="n">max_history</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
                        <span class="n">KerasPolicy</span><span class="p">(</span><span class="n">featurizer</span><span class="p">)])</span>
</pre></div>
</div>
<p>If no featurizer is passed during policy creation, the policies default
featurizer will be used. The <cite>MemoizationPolicy</cite> allows passing in the
<cite>max_history</cite> parameter directly, without creating a featurizer.</p>
</li>
<li><p class="first">the ListSlot now stores a list of entities (with the same name)
present in an utterance</p>
</li>
</ul>
</div>
<div class="section" id="x-to-0-8-0">
<span id="migration-to-0-8-0"></span><h3>0.7.x to 0.8.0<a class="headerlink" href="#x-to-0-8-0" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Credentials for the facebook connector changed. Instead of providing:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># OLD FORMAT</span>
<span class="l l-Scalar l-Scalar-Plain">verify</span><span class="p p-Indicator">:</span> <span class="s">&quot;rasa-bot&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">secret</span><span class="p p-Indicator">:</span> <span class="s">&quot;3e34709d01ea89032asdebfe5a74518&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">page-tokens</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">1730621093913654</span><span class="p p-Indicator">:</span> <span class="s">&quot;EAAbHPa7H9rEBAAuFk4Q3gPKbDedQnx4djJJ1JmQ7CAqO4iJKrQcNT0wtD&quot;</span>
</pre></div>
</div>
<p>you should now pass the configuration parameters like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># NEW FORMAT</span>
<span class="l l-Scalar l-Scalar-Plain">verify</span><span class="p p-Indicator">:</span> <span class="s">&quot;rasa-bot&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">secret</span><span class="p p-Indicator">:</span> <span class="s">&quot;3e34709d01ea89032asdebfe5a74518&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">page-access-token</span><span class="p p-Indicator">:</span> <span class="s">&quot;EAAbHPa7H9rEBAAuFk4Q3gPKbDedQnx4djJJ1JmQ7CAqO4iJKrQcNT0wtD&quot;</span>
</pre></div>
</div>
<p>As you can see, the new facebook connector only supports a single page. Same
change happened to the in code arguments for the connector which should be
changed to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasa_core.channels.facebook</span> <span class="kn">import</span> <span class="n">FacebookInput</span>

<span class="n">FacebookInput</span><span class="p">(</span>
      <span class="n">credentials</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;verify&quot;</span><span class="p">),</span>
      <span class="n">credentials</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;secret&quot;</span><span class="p">),</span>
      <span class="n">credentials</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;page-access-token&quot;</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p class="first">Story file format changed from <code class="docutils literal notranslate"><span class="pre">*</span> <span class="pre">_intent_greet[name=Rasa]</span></code>
to <code class="docutils literal notranslate"><span class="pre">*</span> <span class="pre">intent_greet{&quot;name&quot;:</span> <span class="pre">&quot;Rasa&quot;}</span></code> (old format is still supported but
deprecated). Instead of writing:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span><span class="gu">##</span> story_07715946                     &lt;!-- name of the story - just for debugging --&gt;
<span class="k">*</span> _greet
   <span class="k">-</span> action_ask_howcanhelp
<span class="k">*</span> _inform[location=rome,price=cheap]
   <span class="k">-</span> action_on_it                     &lt;!-- user utterance, in format _intent[entities] --&gt;
   <span class="k">-</span> action_ask_cuisine
</pre></div>
</div>
<p>The new format looks like this:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span><span class="gu">##</span> story_07715946                     &lt;!-- name of the story - just for debugging --&gt;
<span class="k">*</span> greet
   <span class="k">-</span> action_ask_howcanhelp
<span class="k">*</span> inform{&quot;location&quot;: &quot;rome&quot;, &quot;price&quot;: &quot;cheap&quot;}
   <span class="k">-</span> action_on_it                     &lt;!-- user utterance, in format _intent[entities] --&gt;
   <span class="k">-</span> action_ask_cuisine
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>


	    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
	    <script type="text/javascript"> docsearch({
	     apiKey: '1f9e0efb89e98543f6613a60f847b176',
	     indexName: 'rasa',
	     inputSelector: 'body > div.nav-top > .nav-container > .nav > input',
	     debug: false // Set debug to true if you want to inspect the dropdown
	    });
	    </script>
          </div>

          <div class="footer">
            <div class="questions">
              Stuck?
              <a class="reference external" href="https://forum.rasa.com" target="_blank">Ask a Question</a>
              or
              <a class="reference external" href="https://github.com/rasahq/rasa/issues" target="_blank">Create an Issue</a>
            </div>
            <div class="social">
              <a href="https://github.com/RasaHQ" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
              <a href="https://stackoverflow.com/search?q=rasa" target="_blank" title="Stack Overflow"><i class="fab fa-stack-overflow"></i></a>
              <a href="https://www.youtube.com/channel/UCJ0V6493mLvqdiVwOKWBODQ" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
              <a href="https://twitter.com/rasa_hq" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>
            </div>

            <div class="copyright small">
            &copy;2019, Rasa Technologies | <a href="https://rasa.com/imprint/" target="_blank">Imprint</a> | <a href="https://rasa.com/privacy-policy/" target="_blank">Privacy Policy</a>
            
            </div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
    <!-- consent-banner -->
    <div class="consent-banner">
        <div class="container">
            <img class="cookie-icon" src="../../_static/cookie.svg" alt="cookie">
            <p>
                In order to give you a better service Rasa uses cookies.
                By continuing to browse the site you are agreeing to our use of <a href="//rasa.com/privacy-policy" target="_blank">cookies</a>.
                <a class="agree" href="#">I agree</a>.
            </p>
        </div>
    </div>
  </div>

    

  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag(...arguments) {
      dataLayer.push(...arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-87333416-1', {
      'anonymize_ip': true,
    });
  </script>
  <script src="https://rasa.com/assets/js/js.cookies.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-87333416-1"></script>
  <script type="text/javascript" src="https://rasa.com/assets/js/userId.js"></script>

  <script type="text/javascript">
    var clipboard = new ClipboardJS('.copyable');
    clipboard.on('success', function(e) {
      gtag('event', e.action, {
        'event_category': 'code',
        'event_label': e.text
      });
      const id = e.text.replace(' ','-');
      document.getElementById(id).classList.add('visible');
      setTimeout(function(){
        document.getElementById(id).classList.remove('visible');},
        800
      );
    });
    clipboard.on('error', function(e) {
      console.log(e);
    });

    /* Consent Manager */
    $(document).ready(function() {
      if(!document.cookie.match(/^(.*;)?\s*rasa-cookie-consent\s*=\s*[^;]+(.*)?$/))
        $('.consent-banner').addClass('visible');

      $('.consent-banner .agree').click(function(e){
        e.preventDefault();
        var CookieDate = new Date;
        CookieDate.setFullYear(CookieDate.getFullYear() + 1);
        document.cookie = 'rasa-cookie-consent=true; expires=' + CookieDate.toUTCString() + '; domain=.rasa.com';
        $('.consent-banner').remove();
      });
    });
  </script>

  <!-- onsite anchor fix (otherwise anchors scroll to far) -->
  <script>
    /* Adapted from https://stackoverflow.com/a/13067009/1906073 */
    (function(document, history, location) {
      var HISTORY_SUPPORT = !!(history && history.pushState);

      var anchorScrolls = {
        ANCHOR_REGEX: /^#[^ ]+$/,
        OFFSET_HEIGHT_PX: 66,

        /**
         * Establish events, and fix initial scroll position if a hash is provided.
         */
        init: function() {
          this.scrollToCurrent();
          $(window).on('hashchange', $.proxy(this, 'scrollToCurrent'));
          $('body').on('click', 'a', $.proxy(this, 'delegateAnchors'));
        },

        /**
         * Return the offset amount to deduct from the normal scroll position.
         * Modify as appropriate to allow for dynamic calculations
         */
        getFixedOffset: function() {
          return this.OFFSET_HEIGHT_PX;
        },

        /**
         * If the provided href is an anchor which resolves to an element on the
         * page, scroll to it.
         * @param  {String} href
         * @return {Boolean} - Was the href an anchor.
         */
        scrollIfAnchor: function(href, pushToHistory) {
          var match, anchorOffset;

          if(!this.ANCHOR_REGEX.test(href)) {
            return false;
          }

          match = document.getElementById(href.slice(1));

          if(match) {
            anchorOffset = $(match).offset().top - this.getFixedOffset();
            $('html, body').animate({ scrollTop: anchorOffset});

            // Add the state to history as-per normal anchor links
            if(HISTORY_SUPPORT && pushToHistory) {
              history.pushState({}, document.title, location.pathname + href);
            }
          }

          return !!match;
        },

        /**
         * Attempt to scroll to the current location's hash.
         */
        scrollToCurrent: function(e) {
          if(this.scrollIfAnchor(window.location.hash) && e) {
            e.preventDefault();
          }
        },

        /**
         * If the click event's target was an anchor, fix the scroll position.
         */
        delegateAnchors: function(e) {
          var elem = e.target;

          if(this.scrollIfAnchor(elem.getAttribute('href'), true)) {
            e.preventDefault();
          }
        }
      };

      $(document).ready($.proxy(anchorScrolls, 'init'));
    })(window.document, window.history, window.location);

  </script>
  <script type="text/javascript" src="https://rasa.com/assets/js/u-info.js"></script>
  </body>
</html>