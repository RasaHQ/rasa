
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building a Rasa Assistant in Docker</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/banner.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="next" title="Deploying a Rasa Open Source Assistant in Docker Compose" href="../deploying-in-docker-compose/" />
    <link rel="prev" title="Deploying Your Rasa Assistant" href="../../how-to-deploy/" />

  <!-- Google Tag Manager -->
  <script type="opt-in" data-type="application/javascript" data-name="analytics">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MMHSZCS');</script>
  <!-- End Google Tag Manager -->
   
  
  <meta itemprop="image" content="https://rasa.com/assets/img/facebook-og.png">
  <meta property="og:title" content="Building a Rasa Assistant in Docker" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rasa.com/assets/img/facebook-og.png" />
  <meta property="og:url" content="https://rasa.com/docs/rasa/user-guide/docker/building-in-docker" />
  
    <meta name="description" content="Learn how to build a Rasa assistant in Docker." />
    <meta itemprop="description" content="Learn how to build a Rasa assistant in Docker.">
    <meta name="twitter:description" content="Learn how to build a Rasa assistant in Docker." />
    <meta property="og:description" content="Learn how to build a Rasa assistant in Docker." />
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Rasa_HQ">
  <meta name="twitter:title" content="Building a Rasa Assistant in Docker">
  <meta name="twitter:creator" content="@Rasa_HQ">
  <meta name="twitter:image" content="https://rasa.com/assets/img/facebook-og.png">

  <link rel="stylesheet" href="../../../_static/xq-light.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/fontawesome/css/fontawesome-all.css" type="text/css" />
  <link rel="stylesheet" type="text/css" href="https://rasa.com/assets/css/klaro.css">
  <script defer type="text/javascript" src="https://rasa.com/assets/js/klaro_config.js"></script>
  <script defer type="text/javascript" src="https://rasa.com/assets/js/klaro.js"></script>
  <script defer type="text/javascript" src="../../../_static/ace/src-min-noconflict/ace.js"></script>
  <script defer type="text/javascript" src="../../../_static/chatblock/rasa-chatblock.min.js"></script>
  <script type="text/javascript" src="https://storage.googleapis.com/docs-theme/clipboard.min.js"></script>
  
    <link rel="icon" sizes="192x192" href="../../../_static/icon-192x192.png">
    <link rel="apple-touch-icon" href="../../../_static/icon-192x192.png" />
  
  
    
      <link rel="canonical" href="https://rasa.com/docs/rasa/user-guide/docker/building-in-docker/"/>
    
  


  </head><body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe data-name="analytics" data-src="https://www.googletagmanager.com/ns.html?id=GTM-MMHSZCS" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="announce-bar" role="banner">
  These docs are for version 1.x of Rasa Open Source.
  <a href="https://rasa.com/docs/rasa/">Docs for the new version 2.0 can be found here.</a>
</div>

<div class="nav-top">
  <div class="nav-container">
    <ul class="main-nav nav">
      <li>
      <a href="https://rasa.com/docs/" class="brand-link">
          <img src="../../../_static/rasa_logo.svg" width="80px" height="40px" title="Rasa logo" alt="Rasa logo">
    	    <span class="logo extension">docs</span>
    	</a>
      </li>
    </ul>
    <ul class="secondary-nav nav">
      <li>
        <a href="https://github.com/rasaHQ/" target="_blank"><button class="button btn-ghost white"> <i class="fab fa-github"></i>GitHub</button></a>
      </li>
      <li>
        <a href="https://forum.rasa.com" target="_blank"><button class="button"><i class="fas fa-comments"></i> Ask the Community</button></a>
      </li>
    </ul>
  </div>
</div>

  
    
      <div class="sidebar-extended"></div>
    
  

  
    
      <div class="document">
    
  

    
      
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rasa-tutorial/">Tutorial: Rasa Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../building-assistants/">Tutorial: Building Assistants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../command-line-interface/">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../messaging-and-voice-channels/">Messaging and Voice Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing-your-assistant/">Testing Your Assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../setting-up-ci-cd/">Setting up CI/CD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../validate-files/">Validate Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuring-http-api/">Configuring the HTTP API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../how-to-deploy/">Deploying Your Rasa Assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud-storage/">Cloud Storage</a></li>
</ul>
<p class="caption"><span class="caption-text">NLU</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../nlu/about/">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nlu/using-nlu-only/">Using NLU Only</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nlu/training-data-format/">Training Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nlu/language-support/">Language Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nlu/choosing-a-pipeline/">Choosing a Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nlu/components/">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nlu/entity-extraction/">Entity Extraction</a></li>
</ul>
<p class="caption"><span class="caption-text">Core</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../core/about/">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/stories/">Stories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/domains/">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/responses/">Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/actions/">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/reminders-and-external-events/">Reminders and External Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/policies/">Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/slots/">Slots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/forms/">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/retrieval-actions/">Retrieval Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/interactive-learning/">Interactive Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/fallback-actions/">Fallback Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/knowledge-bases/">Knowledge Base Actions</a></li>
</ul>
<p class="caption"><span class="caption-text">Conversation Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../dialogue-elements/dialogue-elements/">Dialogue Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dialogue-elements/small-talk/">Small Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dialogue-elements/completing-tasks/">Completing Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dialogue-elements/guiding-users/">Guiding Users</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/action-server/">Action Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/http-api/">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/jupyter-notebooks/">Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/agent/">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/custom-nlu-components/">Custom NLU Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/rasa-sdk/">Rasa SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/events/">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/tracker/">Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/tracker-stores/">Tracker Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/event-brokers/">Event Brokers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/lock-stores/">Lock Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/training-data-importers/">Training Data Importers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/core-featurization/">Featurization of Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/tensorflow_usage/">TensorFlow Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../migration-guide/">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog/">Rasa Open Source Change Log</a></li>
</ul>
<p class="caption"><span class="caption-text">Migrate from (beta)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../migrate-from/google-dialogflow-to-rasa/">Dialogflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../migrate-from/facebook-wit-ai-to-rasa/">Wit.ai</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../migrate-from/microsoft-luis-to-rasa/">LUIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../migrate-from/ibm-watson-to-rasa/">IBM Watson</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/">Glossary</a></li>
</ul>

<div class="versions">
    <p class="caption">Versions</p>
    <div class="versions-content">
      <div>
        <span class="current-version">
          viewing: 1.10.20
        </span>
      </div>
      <div class="other-versions">
          <p>tags</p>
          <div class="dropdown-content">
              <a href="../../../../1.10.22/user-guide/docker/building-in-docker/">1.10.22</a>
              <a href="../../../../1.10.21/user-guide/docker/building-in-docker/">1.10.21</a>
              <a href="../../../../1.10.20/user-guide/docker/building-in-docker/">1.10.20</a>
              <a href="../../../../1.10.19/user-guide/docker/building-in-docker/">1.10.19</a>
              <a href="../../../../1.10.18/user-guide/docker/building-in-docker/">1.10.18</a>
              <a href="../../../../1.10.17/user-guide/docker/building-in-docker/">1.10.17</a>
              <a href="../../../../1.10.16/user-guide/docker/building-in-docker/">1.10.16</a>
              <a href="../../../../1.10.15/user-guide/docker/building-in-docker/">1.10.15</a>
              <a href="../../../../1.10.14/user-guide/docker/building-in-docker/">1.10.14</a>
              <a href="../../../../1.10.13/user-guide/docker/building-in-docker/">1.10.13</a>
              <a href="../../../../1.10.12/user-guide/docker/building-in-docker/">1.10.12</a>
              <a href="../../../../1.10.11/user-guide/docker/building-in-docker/">1.10.11</a>
              <a href="../../../../1.10.10/user-guide/docker/building-in-docker/">1.10.10</a>
              <a href="../../../../1.10.9/user-guide/docker/building-in-docker/">1.10.9</a>
              <a href="../../../../1.10.8/user-guide/docker/building-in-docker/">1.10.8</a>
              <a href="../../../../1.10.7/user-guide/docker/building-in-docker/">1.10.7</a>
              <a href="../../../../1.10.6/user-guide/docker/building-in-docker/">1.10.6</a>
              <a href="../../../../1.10.5/user-guide/docker/building-in-docker/">1.10.5</a>
              <a href="../../../../1.10.4/user-guide/docker/building-in-docker/">1.10.4</a>
              <a href="../../../../1.10.3/user-guide/docker/building-in-docker/">1.10.3</a>
              <a href="../../../../1.10.2/user-guide/docker/building-in-docker/">1.10.2</a>
              <a href="../../../../1.10.1/user-guide/docker/building-in-docker/">1.10.1</a>
              <a href="../../../../1.10.0/user-guide/docker/building-in-docker/">1.10.0</a>
              <a href="../../../../1.9.7/user-guide/docker/building-in-docker/">1.9.7</a>
              <a href="../../../../1.9.6/user-guide/docker/building-in-docker/">1.9.6</a>
              <a href="../../../../1.9.5/user-guide/docker/building-in-docker/">1.9.5</a>
              <a href="../../../../1.9.4/user-guide/docker/building-in-docker/">1.9.4</a>
              <a href="../../../../1.9.3/user-guide/docker/building-in-docker/">1.9.3</a>
              <a href="../../../../1.9.2/user-guide/docker/building-in-docker/">1.9.2</a>
              <a href="../../../../1.9.1/user-guide/docker/building-in-docker/">1.9.1</a>
              <a href="../../../../1.9.0/user-guide/docker/building-in-docker/">1.9.0</a>
              <a href="../../../../1.8.3/user-guide/docker/building-in-docker/">1.8.3</a>
              <a href="../../../../1.8.2/index/">1.8.2</a>
              <a href="../../../../1.8.1/index/">1.8.1</a>
              <a href="../../../../1.8.0/index/">1.8.0</a>
              <a href="../../../../1.7.4/index/">1.7.4</a>
              <a href="../../../../1.7.3/index/">1.7.3</a>
              <a href="../../../../1.7.2/index/">1.7.2</a>
              <a href="../../../../1.7.1/index/">1.7.1</a>
              <a href="../../../../1.7.0/index/">1.7.0</a>
              <a href="../../../../1.6.2/index/">1.6.2</a>
              <a href="../../../../1.5.3/index/">1.5.3</a>
              <a href="../../../../1.4.6/index/">1.4.6</a>
              <a href="../../../../1.3.10/index/">1.3.10</a>
              <a href="../../../../1.2.9/index/">1.2.9</a>
          </div>
      </div>
    </div>
</div>


        </div>
      </div>
      
    
      
        
      
        <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  


    
    



    <p class="scv-banner"><a href="../../../../1.10.22/user-guide/docker/building-in-docker/"><b>Warning:</b> This document is for an old version of Rasa. The latest version is 1.10.22.</a></p>
<div class="section" id="building-a-rasa-assistant-in-docker">
<span id="building-in-docker"></span><h1>Building a Rasa Assistant in Docker<a class="headerlink" href="#building-a-rasa-assistant-in-docker" title="Permalink to this headline">¶</a></h1>
<p>If you don’t have a Rasa project yet, you can build one in Docker without having to install Rasa Open Source
on your local machine. If you already have a model you’re satisfied with, see
<a class="reference internal" href="../../how-to-deploy/#deploying-your-rasa-assistant"><span class="std std-ref">Deploying Your Rasa Assistant</span></a> to learn how to deploy your model.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#installing-docker" id="id2">Installing Docker</a></p></li>
<li><p><a class="reference internal" href="#setting-up-your-rasa-project" id="id3">Setting up your Rasa Project</a></p></li>
<li><p><a class="reference internal" href="#talking-to-your-assistant" id="id4">Talking to Your Assistant</a></p></li>
<li><p><a class="reference internal" href="#training-a-model" id="id5">Training a Model</a></p></li>
<li><p><a class="reference internal" href="#customizing-your-model" id="id6">Customizing your Model</a></p>
<ul>
<li><p><a class="reference internal" href="#choosing-a-tag" id="id7">Choosing a Tag</a></p></li>
<li><p><a class="reference internal" href="#adding-custom-components" id="id8">Adding Custom Components</a></p></li>
<li><p><a class="reference internal" href="#adding-custom-actions" id="id9">Adding Custom Actions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#deploying-your-assistant" id="id10">Deploying your Assistant</a></p></li>
</ul>
</div>
<div class="section" id="installing-docker">
<h2><a class="toc-backref" href="#id2">Installing Docker</a><a class="headerlink" href="#installing-docker" title="Permalink to this headline">¶</a></h2>
<p>If you’re not sure if you have Docker installed, you can check by running:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker -v
<span class="c1"># Docker version 18.09.2, build 6247962</span>
</pre></div>
</div>
</div></blockquote>
<p>If Docker is installed on your machine, the output should show you your installed
versions of Docker. If the command doesn’t work, you’ll have to install Docker.
See <a class="reference external" href="https://docs.docker.com/install/">Docker Installation</a> for details.</p>
</div>
<div class="section" id="setting-up-your-rasa-project">
<h2><a class="toc-backref" href="#id3">Setting up your Rasa Project</a><a class="headerlink" href="#setting-up-your-rasa-project" title="Permalink to this headline">¶</a></h2>
<p>Just like in the <a class="reference internal" href="../../rasa-tutorial/#rasa-tutorial"><span class="std std-ref">tutorial</span></a>, you’ll use the <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">init</span></code> command to create a project.
The only difference is that you’ll be running Rasa inside a Docker container, using
the image <code class="docutils literal notranslate"><span class="pre">rasa/rasa</span></code>. To initialize your project, run:</p>
<blockquote>
<div><pre class="literal-block">docker run -v $(pwd):/app rasa/rasa:1.10.20-full init --no-prompt</pre>
</div></blockquote>
<p>What does this command mean?</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">$(pwd):/app</span></code> mounts your current working directory to the working directory
in the Docker container. This means that files you create on your computer will be
visible inside the container, and files created in the container will
get synced back to your computer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rasa/rasa</span></code> is the name of the docker image to run. ‘1.10.20-full’ is the name of the tag,
which specifies the version and dependencies.</p></li>
<li><p>the Docker image has the <code class="docutils literal notranslate"><span class="pre">rasa</span></code> command as its entrypoint, which means you don’t
have to type <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">init</span></code>, just <code class="docutils literal notranslate"><span class="pre">init</span></code> is enough.</p></li>
</ul>
<p>Running this command will produce a lot of output. What happens is:</p>
<ul class="simple">
<li><p>a Rasa project is created</p></li>
<li><p>an initial model is trained using the project’s training data.</p></li>
</ul>
<p>To check that the command completed correctly, look at the contents of your working directory:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls -1
</pre></div>
</div>
</div></blockquote>
<p>The initial project files should all be there, as well as a <code class="docutils literal notranslate"><span class="pre">models</span></code> directory that contains your trained model.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you run into permission errors, it may be because the <code class="docutils literal notranslate"><span class="pre">rasa/rasa</span></code> images
run as user <code class="docutils literal notranslate"><span class="pre">1001</span></code> as a best practice, to avoid giving the container <code class="docutils literal notranslate"><span class="pre">root</span></code> permissions.
Hence, all files created by these containers will be owned by user <code class="docutils literal notranslate"><span class="pre">1001</span></code>. See the <a class="reference external" href="https://docs.docker.com/v17.12/edge/engine/reference/commandline/run/">Docker documentation</a>
if you want to run the containers as a different user.</p>
</div>
</div>
<div class="section" id="talking-to-your-assistant">
<h2><a class="toc-backref" href="#id4">Talking to Your Assistant</a><a class="headerlink" href="#talking-to-your-assistant" title="Permalink to this headline">¶</a></h2>
<p>To talk to your newly-trained assistant, run this command:</p>
<blockquote>
<div><pre class="literal-block">docker run -it -v $(pwd):/app rasa/rasa:1.10.20-full shell</pre>
</div></blockquote>
<p>This will start a shell where you can chat to your assistant.
Note that this command includes the flags <code class="docutils literal notranslate"><span class="pre">-it</span></code>, which means that you are running
Docker interactively, and you are able to give input via the command line.
For commands which require interactive input, like <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">shell</span></code> and <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">interactive</span></code>,
you need to pass the <code class="docutils literal notranslate"><span class="pre">-it</span></code> flags.</p>
</div>
<div class="section" id="training-a-model">
<span id="model-training-docker"></span><h2><a class="toc-backref" href="#id5">Training a Model</a><a class="headerlink" href="#training-a-model" title="Permalink to this headline">¶</a></h2>
<p>If you edit the NLU or Core training data or edit the <code class="docutils literal notranslate"><span class="pre">config.yml</span></code> file, you’ll need to
retrain your Rasa model. You can do so by running:</p>
<blockquote>
<div><pre class="literal-block">docker run -v $(pwd):/app rasa/rasa:1.10.20-full train --domain domain.yml --data data --out models</pre>
</div></blockquote>
<p>Here’s what’s happening in that command:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">$(pwd):/app</span></code>: Mounts your project directory into the Docker
container so that Rasa can train a model on your training data</p></li>
<li><p>rasa/rasa:1.10.20-full: Use the Rasa image with the tag ‘1.10.20-full’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">train</span></code>: Execute the <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">train</span></code> command within the container. For more
information see <a class="reference internal" href="../../command-line-interface/#command-line-interface"><span class="std std-ref">Command Line Interface</span></a>.</p></li>
</ul>
</div></blockquote>
<p>In this case, we’ve also passed values for the location of the domain file, training
data, and the models output directory to show how these can be customized.
You can also leave these out, since we are passing the default values.</p>
</div>
<div class="section" id="customizing-your-model">
<h2><a class="toc-backref" href="#id6">Customizing your Model</a><a class="headerlink" href="#customizing-your-model" title="Permalink to this headline">¶</a></h2>
<div class="section" id="choosing-a-tag">
<span id="id1"></span><h3><a class="toc-backref" href="#id7">Choosing a Tag</a><a class="headerlink" href="#choosing-a-tag" title="Permalink to this headline">¶</a></h3>
<p>All <code class="docutils literal notranslate"><span class="pre">rasa/rasa</span></code> image tags start with a version number. The current version is 1.10.20. The tags are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{version}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{version}-full</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{version}-spacy-en</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{version}-spacy-de</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{version}-mitie-en</span></code></p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">{version}-full</span></code> tag includes all possible pipeline dependencies, allowing you to change your <code class="docutils literal notranslate"><span class="pre">config.yml</span></code>
as you like without worrying about missing dependencies. The plain <code class="docutils literal notranslate"><span class="pre">{version}</span></code> tag includes all the
dependencies you need to run the default pipeline created by <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">init</span></code>.</p>
<p>To keep images as small as possible, we also publish different tags of the <code class="docutils literal notranslate"><span class="pre">rasa/rasa</span></code> image
with different dependencies installed. See <a class="reference internal" href="../../../nlu/choosing-a-pipeline/#choosing-a-pipeline"><span class="std std-ref">Choosing a Pipeline</span></a> for more dependency information
specific to your pipeline. For example, if you are using components with pre-trained word vectors from spaCy or
MITIE, you should choose the corresponding tag.</p>
<p>If your model has a dependency that is not included in any of the tags (for example, a different spaCy language model),
you can build a docker image that extends the <code class="docutils literal notranslate"><span class="pre">rasa/rasa</span></code> image.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can see a list of all the versions and tags of the Rasa Open Source
Docker image on <a class="reference external" href="https://hub.docker.com/r/rasa/rasa/">DockerHub</a>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">latest</span></code> tags correspond to the current master build. These tags are not recommended for use,
as they are not guaranteed to be stable.</p>
</div>
</div>
<div class="section" id="adding-custom-components">
<h3><a class="toc-backref" href="#id8">Adding Custom Components</a><a class="headerlink" href="#adding-custom-components" title="Permalink to this headline">¶</a></h3>
<p>If you are using a custom NLU component or policy in your <code class="docutils literal notranslate"><span class="pre">config.yml</span></code>, you have to add the module file to your
Docker container. You can do this by either mounting the file or by including it in your
own custom image (e.g. if the custom component or policy has extra dependencies). Make sure
that your module is in the Python module search path by setting the
environment variable <code class="docutils literal notranslate"><span class="pre">PYTHONPATH=$PYTHONPATH:&lt;directory</span> <span class="pre">of</span> <span class="pre">your</span> <span class="pre">module&gt;</span></code>.</p>
</div>
<div class="section" id="adding-custom-actions">
<h3><a class="toc-backref" href="#id9">Adding Custom Actions</a><a class="headerlink" href="#adding-custom-actions" title="Permalink to this headline">¶</a></h3>
<p>To create more sophisticated assistants, you will want to use <a class="reference internal" href="../../../core/actions/#custom-actions"><span class="std std-ref">Custom Actions</span></a>.
Continuing the example from above, you might want to add an action which tells
the user a joke to cheer them up.</p>
<p>Start by creating the custom actions in a directory <code class="docutils literal notranslate"><span class="pre">actions</span></code> in your working directory:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir actions
mv actions.py actions/actions.py
<span class="c1"># Rasa SDK expects a python module.</span>
<span class="c1"># Therefore, make sure that you have this file in the directory.</span>
touch actions/__init__.py
</pre></div>
</div>
</div></blockquote>
<p>Then build a custom action using the Rasa SDK by editing <code class="docutils literal notranslate"><span class="pre">actions/actions.py</span></code>, for example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">rasa_sdk</span> <span class="kn">import</span> <span class="n">Action</span>


<span class="k">class</span> <span class="nc">ActionJoke</span><span class="p">(</span><span class="n">Action</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;action_joke&quot;</span>

  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dispatcher</span><span class="p">,</span> <span class="n">tracker</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://api.icndb.com/jokes/random&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>  <span class="c1"># make an api call</span>
    <span class="n">joke</span> <span class="o">=</span> <span class="n">request</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="s1">&#39;joke&#39;</span><span class="p">]</span>  <span class="c1"># extract a joke from returned json response</span>
    <span class="n">dispatcher</span><span class="o">.</span><span class="n">utter_message</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">joke</span><span class="p">)</span>  <span class="c1"># send the message back to the user</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>
</div>
</div></blockquote>
<p>In <code class="docutils literal notranslate"><span class="pre">data/stories.md</span></code>, replace <code class="docutils literal notranslate"><span class="pre">utter_cheer_up</span></code> in with the custom action <code class="docutils literal notranslate"><span class="pre">action_joke</span></code>
tell your bot to use this new action.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">domain.yml</span></code>, add a section for custom actions, including your new action:</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">actions</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">action_joke</span>
</pre></div>
</div>
</div></blockquote>
<p>After updating your domain and stories, you have to retrain your model:</p>
<blockquote>
<div><pre class="literal-block">docker run -v $(pwd):/app rasa/rasa:1.10.20-full train</pre>
</div></blockquote>
<p>Your actions will run on a separate server from your Rasa server. First create a network to connect the two containers:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker network create my-project
</pre></div>
</div>
</div></blockquote>
<p>You can then run the actions with the following command:</p>
<blockquote>
<div><pre class="literal-block">docker run -d -v $(pwd)/actions:/app/actions --net my-project --name action-server rasa/rasa-sdk:1.10.3</pre>
</div></blockquote>
<p>Here’s what’s happening in that command:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-d</span></code>: Runs the container in detached mode so that you can run the rasa container in the same window.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">$(pwd):/app</span></code>: Mounts your project directory into the Docker
container so that the action server can run the code in the <code class="docutils literal notranslate"><span class="pre">actions</span></code> folder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">net</span> <span class="pre">my-project</span></code>: Run the server on a specific network so that the rasa container can find it</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--name</span> <span class="pre">action-server</span></code>: Gives the server a specific name for the rasa server to reference</p></li>
<li><p>rasa/rasa-sdk:1.10.3 : Uses the Rasa SDK image with the tag 1.10.3</p></li>
</ul>
</div></blockquote>
<p>Because the action server is running in detached mode, if you want to stop the container,
do it with <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">stop</span> <span class="pre">action-server</span></code>. You can also run <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span></code> at any time to see all
of your currently running containers.</p>
<p>To instruct the Rasa server to use the action server, you have to tell Rasa its location.
Add this endpoint to your <code class="docutils literal notranslate"><span class="pre">endpoints.yml</span></code>, referencing the <code class="docutils literal notranslate"><span class="pre">--name</span></code> you gave the server:</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">action_endpoint</span><span class="p">:</span>
  <span class="nt">url</span><span class="p">:</span> <span class="s">&quot;http://action-server:5055/webhook&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>Now you can talk to your bot again via the <code class="docutils literal notranslate"><span class="pre">shell</span></code> command:</p>
<blockquote>
<div><pre class="literal-block">docker run -it -v $(pwd):/app -p 5005:5005 --net my-project rasa/rasa:1.10.20-full shell</pre>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you stop and restart the <code class="docutils literal notranslate"><span class="pre">action-server</span></code> container, you might see an error like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>docker: Error response from daemon: Conflict. The container name &quot;/action-server&quot; is
already in use by container &quot;f7ffc625e81ad4ad54cf8704e6ad85123c71781ca0a8e4b862f41c5796c33530&quot;.
You have to remove (or rename) that container to be able to reuse that name.
</pre></div>
</div>
<p>If that happens, it means you have a (stopped) container with the name already. You can remove it via:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker rm action-server
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="deploying-your-assistant">
<h2><a class="toc-backref" href="#id10">Deploying your Assistant</a><a class="headerlink" href="#deploying-your-assistant" title="Permalink to this headline">¶</a></h2>
<p>Work on your bot until you have a minimum viable assistant that can handle your happy paths. After
that, you’ll want to deploy your model to get feedback from real test users. To do so, you can deploy the
model you created with Rasa X via one of our <a class="reference internal" href="../../how-to-deploy/#recommended-deployment-methods"><span class="std std-ref">recommended deployment methods</span></a>.
Or, you can do a <a class="reference internal" href="../deploying-in-docker-compose/#deploying-rasa-in-docker-compose"><span class="std std-ref">Rasa-only deployment in Docker Compose</span></a>.</p>
</div>
</div>


          </div>

          <div class="footer">
            <div class="questions">
              Stuck?
              <a class="reference external" href="https://forum.rasa.com" target="_blank">Ask a Question</a>
              or
              <a class="reference external" href="https://github.com/rasahq/rasa/issues" target="_blank">Create an Issue</a>
            </div>
            <div class="social">
              <a href="https://github.com/RasaHQ" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
              <a href="https://stackoverflow.com/search?q=rasa" target="_blank" title="Stack Overflow"><i class="fab fa-stack-overflow"></i></a>
              <a href="https://www.youtube.com/channel/UCJ0V6493mLvqdiVwOKWBODQ" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
              <a href="https://twitter.com/rasa_hq" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>
            </div>

            <div class="copyright small">
            &copy;2020, Rasa Technologies | <a href="https://rasa.com/imprint/" target="_blank">Imprint</a> | <a href="https://rasa.com/privacy-policy/" target="_blank">Privacy Policy</a>
            
            </div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>


    

  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag(...arguments) {
      dataLayer.push(...arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-87333416-1', {
      'anonymize_ip': true,
    });
  </script>
  <script src="https://rasa.com/assets/js/js.cookies.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://www.googletagmanager.com/gtag/js?id=UA-87333416-1"></script>
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://rasa.com/assets/js/userId.js"></script>

  <script type="text/javascript">
    var clipboard = new ClipboardJS('.copyable');
    clipboard.on('success', function(e) {
      gtag('event', e.action, {
        'event_category': 'code',
        'event_label': e.text
      });
      const id = e.text.replace(/ /g,'-');
      document.getElementById(id).classList.add('visible');
      setTimeout(function(){
        document.getElementById(id).classList.remove('visible');},
        800
      );
    });
    clipboard.on('error', function(e) {
      console.log(e);
    });

  </script>

  <!-- ACE Editor, Train & download buttons -->
  <script>
    let updateIntervalId;

    function uuidv4() {
      return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
              (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
      );
    }

    function fetchTracker(url, chatBlockId, conversationId) {
      $.ajax({
        url: url + "/conversations/" + conversationId + "/tracker",
        method: "get",
        dataType: 'json',
        contentType: 'application/json',
        success: function(tracker, status) {
          initChatBlock(url, chatBlockId, conversationId, tracker);
        }
      });
    }

    function sendMessage(url, chatBlockId, conversationId, tracker, message) {
      $.ajax({
        url: url + "/webhooks/rest/webhook",
        method: "post",
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify({
          sender: conversationId,
          message: message
        }),
        success: function(result, status) {
          fetchTracker(url, chatBlockId, conversationId);
        },
      });
    }

    function startFetchingTracker(url, chatBlockId, conversationId) {
      const interval = 2000;

      fetchTracker(url, chatBlockId, conversationId);

      updateIntervalId = setInterval(() => {
        fetchTracker(url, chatBlockId, conversationId);
      }, interval);
    }

    function initChatBlock(url, id, conversationId, tracker) {
      ChatBlock.default.init({
        onSendMessage: (message) => {
          sendMessage(url, id, conversationId, tracker, message);
        },
        username: conversationId,
        tracker: tracker,
        selector: id
      });
    }

    const chatBlockId = '#rasa-chat-block';
    const trackingId = uuidv4();

    $(document).ready(() => {
      // make editors work
      const editors = document.querySelectorAll('.ace-editor');

      const assignTrainingDataToButton = function(e, id, trainButton) {
        const trainingData = trainButton.data('training');

        trainButton.data('training', JSON.stringify({
          ...JSON.parse(trainingData || "{}") || {},
          [id]: e.getValue(),
        }));
      };

      ace.config.set('modePath', "/_static/ace/src-min-noconflict");

      Array.from(editors).forEach(function(editor) {
        const e = ace.edit(editor);
        const id = editor.dataset['id'];
        const trackingEndpoint = editor.dataset['tr-endpoint'];

        e.session.setMode("ace/mode/" + editor.dataset['language']);
        e.renderer.setShowGutter(false);
        e.renderer.setShowPrintMargin(false);
        e.renderer.setPadding(24);
        e.renderer.setScrollMargin(24);
        e.setHighlightActiveLine(false);

        if (trackingEndpoint) {
          e.on("change", function() {
            if (!editor.dataset.hasChanged) {
              editor.dataset.hasChanged = true;
              $.ajax({
                url: trackingEndpoint,
                method: "POST",
                data: {editor: id},
              });
            }
          });
        }

        const trainButton = $('.train__button');

        assignTrainingDataToButton(e, id, trainButton);
        e.on("blur", function() {
          assignTrainingDataToButton(e, id, trainButton);
        });

        editor.style.height = editor.dataset['height'] + 'px';
      });

      // initialize a chat block
      initChatBlock("", chatBlockId, trackingId, {});
    });

    // set train button callback
    $( ".train__button" ).click(function() {
      const trainButton = $('.train__button');
      const trainSpinner = $('.train__spinner');
      const downloadButton = $('.download__button');

      trainButton.prop("disabled", true);
      downloadButton.prop("disabled", true);
      trainSpinner.removeClass('train__spinner--hidden');

      if (updateIntervalId) {
        clearInterval(updateIntervalId);
        initChatBlock("", chatBlockId, trackingId, {});
      }

      $.ajax({
        url: trainButton.data('endpoint'),
        method: trainButton.data('method'),
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify({ tracking_id: trackingId, ...JSON.parse(trainButton.data('training')) }),
        success: function(result, status) {
          trainSpinner.addClass('train__spinner--hidden');
          trainButton.prop("disabled", false);

          if (result['project_download_url']) {
            trainSpinner.addClass('train__spinner--hidden');
            downloadButton.prop("disabled", false);
            downloadButton.data("url", result['project_download_url']);
          }

          if (result['rasa_service_url']) {
            const conversationId = uuidv4();
            startFetchingTracker(result['rasa_service_url'], chatBlockId, conversationId);
          }
        },
        error: function(result, status) {
          trainSpinner.addClass('train__spinner--hidden');
          trainButton.prop("disabled", false);
        }
      });
    });

    // set download button callback
    $( ".download__button" ).click(function() {
      const downloadButton = $('.download__button');
      const url = downloadButton.data("url");

      if (url) {
        location.href = url;
      }
    });
  </script>

  <!-- Dismissable announcement banner -->
  <script>
    var banners = document.querySelectorAll('.announcement-banner');

    Array.from(banners).forEach(function(banner) {
      var cookie_id = banner.dataset['cookie-id'];

      if (localStorage.getItem(cookie_id) !== 'true') {
        banner.classList.add('announcement-banner--visible');
      }

      var bannerCloseButton = banner.querySelector('.announcement-banner__close');

      bannerCloseButton && bannerCloseButton.addEventListener('click', function() {
        localStorage.setItem(cookie_id, 'true');
        banner.classList.remove('announcement-banner--visible');
      });
    });
  </script>

  <!-- onsite anchor fix (otherwise anchors scroll to far) -->
  <script>
    /* Adapted from https://stackoverflow.com/a/13067009/1906073 */
    (function(document, history, location) {
      var HISTORY_SUPPORT = !!(history && history.pushState);

      var anchorScrolls = {
        ANCHOR_REGEX: /^#[^ ]+$/,
        OFFSET_HEIGHT_PX: 66,

        /**
         * Establish events, and fix initial scroll position if a hash is provided.
         */
        init: function() {
          this.scrollToCurrent();
          $(window).on('hashchange', $.proxy(this, 'scrollToCurrent'));
          $('body').on('click', 'a', $.proxy(this, 'delegateAnchors'));
        },

        /**
         * Return the offset amount to deduct from the normal scroll position.
         * Modify as appropriate to allow for dynamic calculations
         */
        getFixedOffset: function() {
          return this.OFFSET_HEIGHT_PX;
        },

        /**
         * If the provided href is an anchor which resolves to an element on the
         * page, scroll to it.
         * @param  {String} href
         * @return {Boolean} - Was the href an anchor.
         */
        scrollIfAnchor: function(href, pushToHistory) {
          var match, anchorOffset;

          if(!this.ANCHOR_REGEX.test(href)) {
            return false;
          }

          match = document.getElementById(href.slice(1));

          if(match) {
            anchorOffset = $(match).offset().top - this.getFixedOffset();
            $('html, body').animate({ scrollTop: anchorOffset});

            // Add the state to history as-per normal anchor links
            if(HISTORY_SUPPORT && pushToHistory) {
              history.pushState({}, document.title, location.pathname + href);
            }
          }

          return !!match;
        },

        /**
         * Attempt to scroll to the current location's hash.
         */
        scrollToCurrent: function(e) {
          if(this.scrollIfAnchor(window.location.hash) && e) {
            e.preventDefault();
          }
        },

        /**
         * If the click event's target was an anchor, fix the scroll position.
         */
        delegateAnchors: function(e) {
          var elem = e.target;

          if(this.scrollIfAnchor(elem.getAttribute('href'), true)) {
            e.preventDefault();
          }
        }
      };

      $(document).ready($.proxy(anchorScrolls, 'init'));
    })(window.document, window.history, window.location);

  </script>
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://rasa.com/assets/js/u-info.js"></script>
      <div class="webchat-banner webchat-banner--hidden">
        <img src="https://rasa.com/assets/img/demo/sara_avatar.png" class="webchat-banner__avatar" alt="">
        👋 I can help you get started with Rasa and answer your technical questions.
        <button class="webchat-banner__close">
          <i class="fas fa-times"></i> 
        </button>
      </div>
      <div id="webchat">
        <script src="../../../_static/rasa-webchat.js"></script>
        <script>
          WebChat.default.init({
            selector: "#webchat",
            initPayload: "/greet",
            socketUrl: "https://website-demo.rasa.com/",
            socketPath: "/socket.io",
            title: "Sara",
            subtitle: "I'm still in development",
            profileAvatar: "https://rasa.com/assets/img/demo/sara_avatar.png",
            showCloseButton: true,
            fullScreenMode: false,
            hideWhenNotConnected: false,
            connectOn: "open",
            autoClearCache: true,
            linksOpenTab: false,
            openLauncherImage: "../../../_static/chat-icon.svg",
            customMessageDelay: (message) => {
              return 900 + message.length;
            },
            params: {
              storage: "local"
            },
            onWidgetEvent: {
              onChatOpen: () => {
                const webchatBanner = document.querySelector('.webchat-banner');
                if (webchatBanner) {
                  localStorage.setItem('WEBCHAT_BANNER_DISMISSED', 'true');
                  webchatBanner.classList.add('webchat-banner--hidden');
                }
              }
            }
          });

          try {
            const webchatBanner = document.querySelector('.webchat-banner');

            if (webchatBanner) {
              if (localStorage.getItem('WEBCHAT_BANNER_DISMISSED') !== 'true') {
                webchatBanner.classList.remove('webchat-banner--hidden');
              }

              const webChatBannerClose = document.querySelector('.webchat-banner__close');

              webChatBannerClose && webChatBannerClose.addEventListener('click', function() {
                localStorage.setItem('WEBCHAT_BANNER_DISMISSED', 'true');
                webchatBanner.classList.add('webchat-banner--hidden');
              });
            }
          } catch (e) {}
        </script>
      </div>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>