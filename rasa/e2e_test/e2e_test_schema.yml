mapping:
  fixtures:
    allowempty: True
    type: "seq"
    sequence:
      - type: map
        mapping:
          regex;(^[a-zA-Z_]+[a-zA-Z0-9_]*$):
            type: "seq"
            sequence:
              - type: map
                mapping:
                  regex;(^[a-zA-Z_]+[a-zA-Z0-9_]*$):
                    type: any

  metadata:
    allowempty: True
    type: "seq"
    sequence:
      - type: map
        mapping:
          regex;(^[a-zA-Z_]+[a-zA-Z0-9_]*$):
            type: map
            mapping:
              regex;(^[a-zA-Z_]+[a-zA-Z0-9_]*$):
                type: any

  test_cases:
    type: "seq"
    sequence:
      - type: map
        mapping:
          test_case:
            type: "str"
            required: True
          fixtures:
            allowempty: True
            type: "seq"
            sequence:
              - type: "str"
                pattern: ^[a-zA-Z_]+[a-zA-Z0-9_]*$
          metadata:
            type: "str"
            pattern: ^[a-zA-Z_]+[a-zA-Z0-9_]*$
          steps:
            type: "seq"
            matching: "any"
            sequence:
              - type: map
                mapping:
                  user:
                    type: str
                  metadata:
                    type: "str"
                    pattern: ^[a-zA-Z_]+[a-zA-Z0-9_]*$
              - type: map
                mapping:
                  utter:
                    type: "str"
              - type: map
                mapping:
                  bot:
                    type: "str"
              - type: map
                mapping:
                  slot_was_set:
                    type: "seq"
                    matching: "any"
                    sequence:
                      - type: str
                      - type: map
                        mapping: # slots can start with [a-zA-Z_] but may contain [a-zA-Z0-9_-]
                          regex;(^[a-zA-Z_]+[a-zA-Z0-9_-]*$):
                            type: any
              - type: map
                mapping:
                  slot_was_not_set:
                    type: "seq"
                    matching: "any"
                    sequence:
                      - type: str
                      - type: map
                        mapping: # slots can start with [a-zA-Z_] but may contain [a-zA-Z0-9_-]
                          regex;(^[a-zA-Z_]+[a-zA-Z0-9_-]*$):
                            type: any
