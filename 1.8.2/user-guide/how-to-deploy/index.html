
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deploying your Rasa Assistant</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/banner.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Cloud Storage" href="../cloud-storage/" />
    <link rel="prev" title="Configuring the HTTP API" href="../configuring-http-api/" />

  <!-- Google Tag Manager -->
  <script type="opt-in" data-type="application/javascript" data-name="analytics">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MMHSZCS');</script>
  <!-- End Google Tag Manager -->
   
  
  <meta itemprop="image" content="https://rasa.com/assets/img/facebook-og.png">
  <meta property="og:title" content="Deploying your Rasa Assistant" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rasa.com/assets/img/facebook-og.png" />
  <meta property="og:url" content="https://rasa.com/docs/rasa/user-guide/how-to-deploy" />
  
    <meta name="description" content="How to deploy your Rasa Assistant with Docker Compose or Kubernetes/Openshift" />
    <meta itemprop="description" content="How to deploy your Rasa Assistant with Docker Compose or Kubernetes/Openshift">
    <meta name="twitter:description" content="How to deploy your Rasa Assistant with Docker Compose or Kubernetes/Openshift" />
    <meta property="og:description" content="How to deploy your Rasa Assistant with Docker Compose or Kubernetes/Openshift" />
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Rasa_HQ">
  <meta name="twitter:title" content="Deploying your Rasa Assistant">
  <meta name="twitter:creator" content="@Rasa_HQ">
  <meta name="twitter:image" content="https://rasa.com/assets/img/facebook-og.png">

  <link rel="stylesheet" href="../../_static/xq-light.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/fontawesome/css/fontawesome-all.css" type="text/css" />
  <link rel="stylesheet" type="text/css" href="https://rasa.com/assets/css/klaro.css">
  <script defer type="text/javascript" src="https://rasa.com/assets/js/klaro_config.js"></script>
  <script defer type="text/javascript" src="https://rasa.com/assets/js/klaro.js"></script>
  <script defer type="text/javascript" src="../../_static/ace/src-min-noconflict/ace.js"></script>
  <script defer type="text/javascript" src="../../_static/chatblock/rasa-chatblock.min.js"></script>
  <script type="text/javascript" src="https://storage.googleapis.com/docs-theme/clipboard.min.js"></script>
  
    <link rel="icon" sizes="192x192" href="../../_static/icon-192x192.png">
    <link rel="apple-touch-icon" href="../../_static/icon-192x192.png" />
  
  


  </head><body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe data-name="analytics" data-src="https://www.googletagmanager.com/ns.html?id=GTM-MMHSZCS" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="announce-bar" role="banner">
  These docs are for version 1.x of Rasa Open Source.
  <a href="https://rasa.com/docs/rasa/">Docs for the new version 2.0 can be found here.</a>
</div>

<div class="nav-top">
  <div class="nav-container">
    <ul class="main-nav nav">
      <li>
      <a href="https://rasa.com/docs/" class="brand-link">
          <img src="../../_static/rasa_logo.svg" width="80px" height="40px" title="Rasa logo" alt="Rasa logo">
    	    <span class="logo extension">docs</span>
    	</a>
      </li>
    </ul>
    <ul class="secondary-nav nav">
      <li>
        <a href="https://github.com/rasaHQ/" target="_blank"><button class="button btn-ghost white"> <i class="fab fa-github"></i>GitHub</button></a>
      </li>
      <li>
        <a href="https://forum.rasa.com" target="_blank"><button class="button"><i class="fas fa-comments"></i> Ask the Community</button></a>
      </li>
    </ul>
  </div>
</div>

  
    
      <div class="sidebar-extended"></div>
    
  

  
    
      <div class="document">
    
  

    
      
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rasa-tutorial/">Tutorial: Rasa Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building-assistants/">Tutorial: Building Assistants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command-line-interface/">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../messaging-and-voice-channels/">Messaging and Voice Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../evaluating-models/">Evaluating Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validate-files/">Validate Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuring-http-api/">Configuring the HTTP API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Deploying your Rasa Assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud-storage/">Cloud Storage</a></li>
</ul>
<p class="caption"><span class="caption-text">NLU</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/about/">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/using-nlu-only/">Using NLU Only</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/training-data-format/">Training Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/choosing-a-pipeline/">Choosing a Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/language-support/">Language Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/entity-extraction/">Entity Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/components/">Components</a></li>
</ul>
<p class="caption"><span class="caption-text">Core</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core/about/">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/stories/">Stories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/domains/">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/responses/">Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/actions/">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/reminders-and-external-events/">Reminders and External Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/policies/">Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/slots/">Slots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/forms/">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/retrieval-actions/">Retrieval Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/interactive-learning/">Interactive Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/fallback-actions/">Fallback Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/knowledge-bases/">Knowledge Base Actions</a></li>
</ul>
<p class="caption"><span class="caption-text">Conversation Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/dialogue-elements/">Dialogue Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/small-talk/">Small Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/completing-tasks/">Completing Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/guiding-users/">Guiding Users</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/action-server/">Action Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/http-api/">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/jupyter-notebooks/">Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/agent/">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/custom-nlu-components/">Custom NLU Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/rasa-sdk/">Rasa SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/events/">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tracker/">Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tracker-stores/">Tracker Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/event-brokers/">Event Brokers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/lock-stores/">Lock Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/training-data-importers/">Training Data Importers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/core-featurization/">Featurization of Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tensorflow_usage/">TensorFlow Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guide/">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/">Rasa Open Source Change Log</a></li>
</ul>
<p class="caption"><span class="caption-text">Migrate from (beta)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/google-dialogflow-to-rasa/">Dialogflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/facebook-wit-ai-to-rasa/">Wit.ai</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/microsoft-luis-to-rasa/">LUIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/ibm-watson-to-rasa/">IBM Watson</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a></li>
</ul>

<div class="versions">
    <p class="caption">Versions</p>
    <div class="versions-content">
      <div>
        <span class="current-version">
          viewing: 1.8.2
        </span>
      </div>
      <div class="other-versions">
          <p>tags</p>
          <div class="dropdown-content">
              <a href="../../../1.10.22/user-guide/how-to-deploy/">1.10.22</a>
              <a href="../../../1.10.21/user-guide/how-to-deploy/">1.10.21</a>
              <a href="../../../1.10.20/user-guide/how-to-deploy/">1.10.20</a>
              <a href="../../../1.10.19/user-guide/how-to-deploy/">1.10.19</a>
              <a href="../../../1.10.18/user-guide/how-to-deploy/">1.10.18</a>
              <a href="../../../1.10.17/user-guide/how-to-deploy/">1.10.17</a>
              <a href="../../../1.10.16/user-guide/how-to-deploy/">1.10.16</a>
              <a href="../../../1.10.15/user-guide/how-to-deploy/">1.10.15</a>
              <a href="../../../1.10.14/user-guide/how-to-deploy/">1.10.14</a>
              <a href="../../../1.10.13/user-guide/how-to-deploy/">1.10.13</a>
              <a href="../../../1.10.12/user-guide/how-to-deploy/">1.10.12</a>
              <a href="../../../1.10.11/user-guide/how-to-deploy/">1.10.11</a>
              <a href="../../../1.10.10/user-guide/how-to-deploy/">1.10.10</a>
              <a href="../../../1.10.9/user-guide/how-to-deploy/">1.10.9</a>
              <a href="../../../1.10.8/user-guide/how-to-deploy/">1.10.8</a>
              <a href="../../../1.10.7/user-guide/how-to-deploy/">1.10.7</a>
              <a href="../../../1.10.6/user-guide/how-to-deploy/">1.10.6</a>
              <a href="../../../1.10.5/user-guide/how-to-deploy/">1.10.5</a>
              <a href="../../../1.10.4/user-guide/how-to-deploy/">1.10.4</a>
              <a href="../../../1.10.3/user-guide/how-to-deploy/">1.10.3</a>
              <a href="../../../1.10.2/user-guide/how-to-deploy/">1.10.2</a>
              <a href="../../../1.10.1/user-guide/how-to-deploy/">1.10.1</a>
              <a href="../../../1.10.0/user-guide/how-to-deploy/">1.10.0</a>
              <a href="../../../1.9.7/user-guide/how-to-deploy/">1.9.7</a>
              <a href="../../../1.9.6/user-guide/how-to-deploy/">1.9.6</a>
              <a href="../../../1.9.5/user-guide/how-to-deploy/">1.9.5</a>
              <a href="../../../1.9.4/user-guide/how-to-deploy/">1.9.4</a>
              <a href="../../../1.9.3/user-guide/how-to-deploy/">1.9.3</a>
              <a href="../../../1.9.2/user-guide/how-to-deploy/">1.9.2</a>
              <a href="../../../1.9.1/user-guide/how-to-deploy/">1.9.1</a>
              <a href="../../../1.9.0/user-guide/how-to-deploy/">1.9.0</a>
              <a href="../../../1.8.3/user-guide/how-to-deploy/">1.8.3</a>
              <a href="../../../1.8.2/user-guide/how-to-deploy/">1.8.2</a>
              <a href="../../../1.8.1/user-guide/how-to-deploy/">1.8.1</a>
              <a href="../../../1.8.0/user-guide/how-to-deploy/">1.8.0</a>
              <a href="../../../1.7.4/user-guide/how-to-deploy/">1.7.4</a>
              <a href="../../../1.7.3/user-guide/how-to-deploy/">1.7.3</a>
              <a href="../../../1.7.2/user-guide/how-to-deploy/">1.7.2</a>
              <a href="../../../1.7.1/user-guide/how-to-deploy/">1.7.1</a>
              <a href="../../../1.7.0/index/">1.7.0</a>
              <a href="../../../1.6.2/index/">1.6.2</a>
              <a href="../../../1.5.3/index/">1.5.3</a>
              <a href="../../../1.4.6/index/">1.4.6</a>
              <a href="../../../1.3.10/index/">1.3.10</a>
              <a href="../../../1.2.9/index/">1.2.9</a>
          </div>
      </div>
    </div>
</div>


        </div>
      </div>
      
    
      
        
      
        <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  


    
    



    <p class="scv-banner"><a href="../../../1.10.22/user-guide/how-to-deploy/"><b>Warning:</b> This document is for an old version of Rasa. The latest version is 1.10.22.</a></p>
<div class="section" id="deploying-your-rasa-assistant">
<span id="id1"></span><h1>Deploying your Rasa Assistant<a class="headerlink" href="#deploying-your-rasa-assistant" title="Permalink to this headline">¶</a></h1>

  <div class="edit-link">
    <a class="reference external" href="https://github.com/RasaHQ/rasa/edit/master/docs/user-guide/how-to-deploy.rst" target="_blank"><i class="fab fa-github" style="font-size: 85%; padding-right: 4px;"></i>SUGGEST EDITS</a>
  </div><p>This page explains when and how to deploy an assistant built with Rasa.
It will allow you to make your assistant available to users and set you up with a production-ready environment.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#when-to-deploy-your-assistant" id="id6">When to deploy your assistant</a></p></li>
<li><p><a class="reference internal" href="#recommended-deployment-methods" id="id7">Recommended Deployment Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#kubernetes-openshift" id="id8">Kubernetes/Openshift</a></p></li>
<li><p><a class="reference internal" href="#docker-compose" id="id9">Docker Compose</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#rasa-only-deployment-with-docker-compose" id="id10">Rasa-Only Deployment with Docker Compose</a></p>
<ul>
<li><p><a class="reference internal" href="#installing-docker" id="id11">Installing Docker</a></p></li>
<li><p><a class="reference internal" href="#building-an-assistant-with-rasa-and-docker" id="id12">Building an Assistant with Rasa and Docker</a></p></li>
<li><p><a class="reference internal" href="#customizing-your-model" id="id13">Customizing your Model</a></p></li>
<li><p><a class="reference internal" href="#running-the-rasa-server" id="id14">Running the Rasa Server</a></p></li>
<li><p><a class="reference internal" href="#using-docker-compose-to-run-multiple-services" id="id15">Using Docker Compose to Run Multiple Services</a></p></li>
<li><p><a class="reference internal" href="#adding-custom-actions" id="id16">Adding Custom Actions</a></p></li>
<li><p><a class="reference internal" href="#adding-a-custom-tracker-store" id="id17">Adding a Custom Tracker Store</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="when-to-deploy-your-assistant">
<h2><a class="toc-backref" href="#id6">When to deploy your assistant</a><a class="headerlink" href="#when-to-deploy-your-assistant" title="Permalink to this headline">¶</a></h2>
The best time to deploy your assistant and make it available to test users is once it can handle the most important happy paths or is what we call a <a style="text-decoration: none" href="https://rasa.com/docs/rasa/glossary">minimum viable assistant</a>.<p>The recommended deployment methods described below make it easy to share your assistant with test users via the <a class="reference external" href="https://rasa.com/docs/rasa-x/user-guide/enable-workflows#conversations-with-test-users">share your assistant feature in Rasa X</a>. Then, when you’re ready to make your assistant available via one or more <a class="reference internal" href="../messaging-and-voice-channels/#messaging-and-voice-channels"><span class="std std-ref">Messaging and Voice Channels</span></a>, you can easily add them to your existing deployment set up.</p>
</div>
<div class="section" id="recommended-deployment-methods">
<span id="id2"></span><h2><a class="toc-backref" href="#id7">Recommended Deployment Methods</a><a class="headerlink" href="#recommended-deployment-methods" title="Permalink to this headline">¶</a></h2>
<p>The recommended way to deploy an assistant is using either the Docker Compose or Kubernetes/Openshift options we support. Both deploy Rasa X and your assistant. They are the easiest ways to deploy your assistant, allow you to use Rasa X to view conversations and turn them into training data, and are production-ready.</p>
<div class="section" id="kubernetes-openshift">
<h3><a class="toc-backref" href="#id8">Kubernetes/Openshift</a><a class="headerlink" href="#kubernetes-openshift" title="Permalink to this headline">¶</a></h3>
<p>Kubernetes/Openshift is the best option if you need a scalable architecture. It’s straightforward to deploy if you use the helm charts we provide. However, you can also customize the Helm charts if you have specific requirements.</p>
<blockquote>
<div><ul class="simple">
<li><p>Default: Read the docs <a class="reference external" href="https://rasa.com/docs/rasa-x/installation-and-setup/openshift-kubernetes/">here</a>.</p></li>
<li><p>Custom: Read the docs <a class="reference external" href="https://rasa.com/docs/rasa-x/installation-and-setup/openshift-kubernetes/">here</a> and customize the <a class="reference external" href="https://github.com/RasaHQ/rasa-x-helm">open source Helm charts</a>.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="docker-compose">
<h3><a class="toc-backref" href="#id9">Docker Compose</a><a class="headerlink" href="#docker-compose" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Default: Watching this <a class="reference external" href="https://www.youtube.com/watch?v=IUYdwy8HPVc">video</a> or read the docs <a class="reference external" href="https://rasa.com/docs/rasa-x/installation-and-setup/docker-compose-script/">here</a>.</p></li>
<li><p>Custom: Read the docs <a class="reference external" href="https://rasa.com/docs/rasa-x/installation-and-setup/docker-compose-manual/">here</a>.</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="rasa-only-deployment-with-docker-compose">
<span id="rasa-only-deployment"></span><h2><a class="toc-backref" href="#id10">Rasa-Only Deployment with Docker Compose</a><a class="headerlink" href="#rasa-only-deployment-with-docker-compose" title="Permalink to this headline">¶</a></h2>
<p>It is also possible to deploy a Rasa assistant using Docker Compose without Rasa X.</p>
<div class="contents local topic" id="id3">
<ul class="simple">
<li><p><a class="reference internal" href="#installing-docker" id="id18">Installing Docker</a></p></li>
<li><p><a class="reference internal" href="#building-an-assistant-with-rasa-and-docker" id="id19">Building an Assistant with Rasa and Docker</a></p>
<ul>
<li><p><a class="reference internal" href="#setup" id="id20">Setup</a></p></li>
<li><p><a class="reference internal" href="#talking-to-your-assistant" id="id21">Talking to Your Assistant</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#customizing-your-model" id="id22">Customizing your Model</a></p>
<ul>
<li><p><a class="reference internal" href="#choosing-a-tag" id="id23">Choosing a Tag</a></p></li>
<li><p><a class="reference internal" href="#training-a-custom-rasa-model-with-docker" id="id24">Training a Custom Rasa Model with Docker</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#running-the-rasa-server" id="id25">Running the Rasa Server</a></p></li>
<li><p><a class="reference internal" href="#using-docker-compose-to-run-multiple-services" id="id26">Using Docker Compose to Run Multiple Services</a></p></li>
<li><p><a class="reference internal" href="#adding-custom-actions" id="id27">Adding Custom Actions</a></p>
<ul>
<li><p><a class="reference internal" href="#creating-a-custom-action" id="id28">Creating a Custom Action</a></p></li>
<li><p><a class="reference internal" href="#adding-the-action-server" id="id29">Adding the Action Server</a></p></li>
<li><p><a class="reference internal" href="#adding-custom-dependencies" id="id30">Adding Custom Dependencies</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#adding-a-custom-tracker-store" id="id31">Adding a Custom Tracker Store</a></p>
<ul>
<li><p><a class="reference internal" href="#using-postgresql-as-tracker-store" id="id32">Using PostgreSQL as Tracker Store</a></p></li>
<li><p><a class="reference internal" href="#using-mongodb-as-tracker-store" id="id33">Using MongoDB as Tracker Store</a></p></li>
<li><p><a class="reference internal" href="#using-redis-as-tracker-store" id="id34">Using Redis as Tracker Store</a></p></li>
<li><p><a class="reference internal" href="#using-a-custom-tracker-store-implementation" id="id35">Using a Custom Tracker Store Implementation</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="installing-docker">
<h3><a class="toc-backref" href="#id18">Installing Docker</a><a class="headerlink" href="#installing-docker" title="Permalink to this headline">¶</a></h3>
<p>If you’re not sure if you have Docker installed, you can check by running:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker -v <span class="o">&amp;&amp;</span> docker-compose -v
<span class="c1"># Docker version 18.09.2, build 6247962</span>
<span class="c1"># docker-compose version 1.23.2, build 1110ad01</span>
</pre></div>
</div>
</div></blockquote>
<p>If Docker is installed on your machine, the output should show you your installed
versions of Docker and Docker Compose. If the command doesn’t work, you’ll have to
install Docker.
See <a class="reference external" href="https://docs.docker.com/install/">Docker Installation</a> for details.</p>
</div>
<div class="section" id="building-an-assistant-with-rasa-and-docker">
<h3><a class="toc-backref" href="#id19">Building an Assistant with Rasa and Docker</a><a class="headerlink" href="#building-an-assistant-with-rasa-and-docker" title="Permalink to this headline">¶</a></h3>
<p>This section will cover the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>Setting up your Rasa project and training an initial model</p></li>
<li><p>Talking to your AI assistant via Docker</p></li>
<li><p>Choosing a Docker image tag</p></li>
<li><p>Training your Rasa models using Docker</p></li>
<li><p>Talking to your assistant using Docker</p></li>
<li><p>Running a Rasa server with Docker</p></li>
</ul>
</div></blockquote>
<div class="section" id="setup">
<h4><a class="toc-backref" href="#id20">Setup</a><a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h4>
<p>Just like in the <a class="reference internal" href="../rasa-tutorial/#rasa-tutorial"><span class="std std-ref">tutorial</span></a>, you’ll use the <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">init</span></code> command to create a project.
The only difference is that you’ll be running Rasa inside a Docker container, using
the image <code class="docutils literal notranslate"><span class="pre">rasa/rasa</span></code>. To initialize your project, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/app rasa/rasa init --no-prompt
</pre></div>
</div>
<p>What does this command mean?</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">$(pwd):/app</span></code> mounts your current working directory to the working directory
in the Docker container. This means that files you create on your computer will be
visible inside the container, and files created in the container will
get synced back to your computer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rasa/rasa</span></code> is the name of the docker image to run.</p></li>
<li><p>the Docker image has the <code class="docutils literal notranslate"><span class="pre">rasa</span></code> command as its entrypoint, which means you don’t
have to type <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">init</span></code>, just <code class="docutils literal notranslate"><span class="pre">init</span></code> is enough.</p></li>
</ul>
<p>Running this command will produce a lot of output. What happens is:</p>
<ul class="simple">
<li><p>a Rasa project is created</p></li>
<li><p>an initial model is trained using the project’s training data.</p></li>
</ul>
<p>To check that the command completed correctly, look at the contents of your working directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls -1
</pre></div>
</div>
<p>The initial project files should all be there, as well as a <code class="docutils literal notranslate"><span class="pre">models</span></code> directory that contains your trained model.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default Docker runs containers as <code class="docutils literal notranslate"><span class="pre">root</span></code> user. Hence, all files created by
these containers will be owned by <code class="docutils literal notranslate"><span class="pre">root</span></code>. See the <a class="reference external" href="https://docs.docker.com/v17.12/edge/engine/reference/commandline/run/">documentation of docker</a>
and <a class="reference external" href="https://docs.docker.com/compose/compose-file/">docker-compose</a> if you want to
run the containers with a different user.</p>
</div>
</div>
<div class="section" id="talking-to-your-assistant">
<h4><a class="toc-backref" href="#id21">Talking to Your Assistant</a><a class="headerlink" href="#talking-to-your-assistant" title="Permalink to this headline">¶</a></h4>
<p>To talk to your newly-trained assistant, run this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -it -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/app rasa/rasa shell
</pre></div>
</div>
<p>This will start a shell where you can chat to your assistant.
Note that this command includes the flags <code class="docutils literal notranslate"><span class="pre">-it</span></code>, which means that you are running
Docker interactively, and you are able to give input via the command line.
For commands which require interactive input, like <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">shell</span></code> and <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">interactive</span></code>,
you need to pass the <code class="docutils literal notranslate"><span class="pre">-it</span></code> flags.</p>
</div>
</div>
<div class="section" id="customizing-your-model">
<h3><a class="toc-backref" href="#id22">Customizing your Model</a><a class="headerlink" href="#customizing-your-model" title="Permalink to this headline">¶</a></h3>
<div class="section" id="choosing-a-tag">
<h4><a class="toc-backref" href="#id23">Choosing a Tag</a><a class="headerlink" href="#choosing-a-tag" title="Permalink to this headline">¶</a></h4>
<p>To keep images as small as possible, we publish different tags of the <code class="docutils literal notranslate"><span class="pre">rasa/rasa</span></code> image
with different dependencies installed. See <a class="reference internal" href="../../nlu/choosing-a-pipeline/#choosing-a-pipeline"><span class="std std-ref">Choosing a Pipeline</span></a> for more information
about depedencies.</p>
<p>All tags start with a version – the <code class="docutils literal notranslate"><span class="pre">latest</span></code> tag corresponds to the current master build.
The tags are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{version}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{version}-spacy-en</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{version}-spacy-de</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{version}-mitie-en</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{version}-full</span></code></p></li>
</ul>
<p>The plain <code class="docutils literal notranslate"><span class="pre">{version}</span></code> tag includes all the dependencies you need to run the <code class="docutils literal notranslate"><span class="pre">supervised_embeddings</span></code> pipeline.
If you are using components with pre-trained word vectors, you need to choose the corresponding tag.
Alternatively, you can use the <code class="docutils literal notranslate"><span class="pre">-full</span></code> tag, which includes all pipeline dependencies.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can see a list of all the versions and tags of the Rasa Docker image
<a class="reference external" href="https://hub.docker.com/r/rasa/rasa/">here</a>.</p>
</div>
</div>
<div class="section" id="training-a-custom-rasa-model-with-docker">
<span id="model-training-docker"></span><h4><a class="toc-backref" href="#id24">Training a Custom Rasa Model with Docker</a><a class="headerlink" href="#training-a-custom-rasa-model-with-docker" title="Permalink to this headline">¶</a></h4>
<p>Edit the <code class="docutils literal notranslate"><span class="pre">config.yml</span></code> file to use the pipeline you want, and place
your NLU and Core data into the <code class="docutils literal notranslate"><span class="pre">data/</span></code> directory.
Now you can train your Rasa model by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run <span class="se">\</span>
  -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/app <span class="se">\</span>
  rasa/rasa:latest-full <span class="se">\</span>
  train <span class="se">\</span>
    --domain domain.yml <span class="se">\</span>
    --data data <span class="se">\</span>
    --out models
</pre></div>
</div>
<p>Here’s what’s happening in that command:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">$(pwd):/app</span></code>: Mounts your project directory into the Docker
container so that Rasa can train a model on your training data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rasa/rasa:latest-full</span></code>: Use the Rasa image with the tag <code class="docutils literal notranslate"><span class="pre">latest-full</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">train</span></code>: Execute the <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">train</span></code> command within the container. For more
information see <a class="reference internal" href="../command-line-interface/#command-line-interface"><span class="std std-ref">Command Line Interface</span></a>.</p></li>
</ul>
</div></blockquote>
<p>In this case, we’ve also passed values for the location of the domain file, training
data, and the models output directory to show how these can be customized.
You can also leave these out since we are passing the default values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using a custom NLU component or policy, you have to add the module file to your
Docker container. You can do this by either mounting the file or by including it in your
own custom image (e.g. if the custom component or policy has extra dependencies). Make sure
that your module is in the Python module search path by setting the
environment variable <code class="docutils literal notranslate"><span class="pre">PYTHONPATH=$PYTHONPATH:&lt;directory</span> <span class="pre">of</span> <span class="pre">your</span> <span class="pre">module&gt;</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="running-the-rasa-server">
<h3><a class="toc-backref" href="#id25">Running the Rasa Server</a><a class="headerlink" href="#running-the-rasa-server" title="Permalink to this headline">¶</a></h3>
<p>To run your AI assistant in production, configure your required
<a class="reference internal" href="../messaging-and-voice-channels/#messaging-and-voice-channels"><span class="std std-ref">Messaging and Voice Channels</span></a> in <code class="docutils literal notranslate"><span class="pre">credentials.yml</span></code>. If this file does not
exist, create it using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>touch credentials.yml
</pre></div>
</div>
<p>Then edit it according to your connected channels.
After, run the trained model with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run <span class="se">\</span>
  -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/models:/app/models <span class="se">\</span>
  rasa/rasa:latest-full <span class="se">\</span>
  run
</pre></div>
</div>
<p>Command Description:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">$(pwd)/models:/app/models</span></code>: Mounts the directory with the trained Rasa model
in the container</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rasa/rasa:latest-full</span></code>: Use the Rasa image with the tag <code class="docutils literal notranslate"><span class="pre">latest-full</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run</span></code>: Executes the <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">run</span></code> command. For more information see
<a class="reference internal" href="../command-line-interface/#command-line-interface"><span class="std std-ref">Command Line Interface</span></a>.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="using-docker-compose-to-run-multiple-services">
<h3><a class="toc-backref" href="#id26">Using Docker Compose to Run Multiple Services</a><a class="headerlink" href="#using-docker-compose-to-run-multiple-services" title="Permalink to this headline">¶</a></h3>
<p>To run Rasa together with other services, such as a server for custom actions, it is
recommend to use <a class="reference external" href="https://docs.docker.com/compose/">Docker Compose</a>.
Docker Compose provides an easy way to run multiple containers together without
having to run multiple commands.</p>
<p>Start by creating a file called <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>touch docker-compose.yml
</pre></div>
</div>
<p>Add the following content to the file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3.0&#39;</span>
<span class="nt">services</span><span class="p">:</span>
  <span class="nt">rasa</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rasa/rasa:latest-full</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">5005:5005</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./:/app</span>
    <span class="nt">command</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">run</span>
</pre></div>
</div>
<p>The file starts with the version of the Docker Compose specification that you
want to use.
Each container is declared as a <code class="docutils literal notranslate"><span class="pre">service</span></code> within the docker-compose file.
The first service is the <code class="docutils literal notranslate"><span class="pre">rasa</span></code> service.</p>
<p>The command is similar to the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> command.
The <code class="docutils literal notranslate"><span class="pre">ports</span></code> part defines a port mapping between the container and your host
system. In this case it makes <code class="docutils literal notranslate"><span class="pre">5005</span></code> of the <code class="docutils literal notranslate"><span class="pre">rasa</span></code> service available on
port <code class="docutils literal notranslate"><span class="pre">5005</span></code> of your host.
This is the port of the <a class="reference internal" href="../connectors/your-own-website/#rest-channels"><span class="std std-ref">REST Channel</span></a> interface of Rasa.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since Docker Compose starts a set of Docker containers, it is no longer
possible to connect to the command line of a single container after executing the
<code class="docutils literal notranslate"><span class="pre">run</span></code> command.</p>
</div>
<p>To run the services configured in your <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> execute:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker-compose up
</pre></div>
</div>
</div>
<div class="section" id="adding-custom-actions">
<h3><a class="toc-backref" href="#id27">Adding Custom Actions</a><a class="headerlink" href="#adding-custom-actions" title="Permalink to this headline">¶</a></h3>
<p>To create more sophisticated assistants, you will want to use <a class="reference internal" href="../../core/actions/#custom-actions"><span class="std std-ref">Custom Actions</span></a>.
Continuing the example from above, you might want to add an action which tells
the user a joke to cheer them up.</p>
<div class="section" id="creating-a-custom-action">
<h4><a class="toc-backref" href="#id28">Creating a Custom Action</a><a class="headerlink" href="#creating-a-custom-action" title="Permalink to this headline">¶</a></h4>
<p>Start by creating the custom actions in a directory <code class="docutils literal notranslate"><span class="pre">actions</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir actions
<span class="c1"># Rasa SDK expects a python module.</span>
<span class="c1"># Therefore, make sure that you have this file in the directory.</span>
touch actions/__init__.py
touch actions/actions.py
</pre></div>
</div>
<p>Then build a custom action using the Rasa SDK, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">rasa_sdk</span> <span class="kn">import</span> <span class="n">Action</span>


<span class="k">class</span> <span class="nc">ActionJoke</span><span class="p">(</span><span class="n">Action</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;action_joke&quot;</span>

  <span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dispatcher</span><span class="p">,</span> <span class="n">tracker</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://api.icndb.com/jokes/random&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>  <span class="c1"># make an api call</span>
    <span class="n">joke</span> <span class="o">=</span> <span class="n">request</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="s1">&#39;joke&#39;</span><span class="p">]</span>  <span class="c1"># extract a joke from returned json response</span>
    <span class="n">dispatcher</span><span class="o">.</span><span class="n">utter_message</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">joke</span><span class="p">)</span>  <span class="c1"># send the message back to the user</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>
</div>
<p>Next, add the custom action in your stories and your domain file.
Continuing with the example bot from <code class="docutils literal notranslate"><span class="pre">rasa</span> <span class="pre">init</span></code>, replace <code class="docutils literal notranslate"><span class="pre">utter_cheer_up</span></code> in
<code class="docutils literal notranslate"><span class="pre">data/stories.md</span></code> with the custom action <code class="docutils literal notranslate"><span class="pre">action_joke</span></code>, and add
<code class="docutils literal notranslate"><span class="pre">action_joke</span></code> to the actions in the domain file.</p>
</div>
<div class="section" id="adding-the-action-server">
<h4><a class="toc-backref" href="#id29">Adding the Action Server</a><a class="headerlink" href="#adding-the-action-server" title="Permalink to this headline">¶</a></h4>
<p>The custom actions are run by the action server.
To spin it up together with the Rasa instance, add a service
<code class="docutils literal notranslate"><span class="pre">action_server</span></code> to the <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3.0&#39;</span>
<span class="nt">services</span><span class="p">:</span>
  <span class="nt">rasa</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rasa/rasa:latest-full</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">5005:5005</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./:/app</span>
    <span class="nt">command</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">run</span>
<span class="hll">  <span class="nt">action_server</span><span class="p">:</span>
</span><span class="hll">    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rasa/rasa-sdk:latest</span>
</span><span class="hll">    <span class="nt">volumes</span><span class="p">:</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./actions:/app/actions</span>
</span></pre></div>
</div>
<p>This pulls the image for the Rasa SDK which includes the action server,
mounts your custom actions into it, and starts the server.</p>
<p>To instruct Rasa to use the action server you have to tell Rasa its location.
Add this to your <code class="docutils literal notranslate"><span class="pre">endpoints.yml</span></code> (if it does not exist, create it):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">action_endpoint</span><span class="p">:</span>
  <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://action_server:5055/webhook</span>
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">docker-compose</span> <span class="pre">up</span></code> to start the action server together
with Rasa.</p>
</div>
<div class="section" id="adding-custom-dependencies">
<span id="deploying-your-rasa-assistant-custom-dependencies"></span><h4><a class="toc-backref" href="#id30">Adding Custom Dependencies</a><a class="headerlink" href="#adding-custom-dependencies" title="Permalink to this headline">¶</a></h4>
<p>If your custom action has additional dependencies of systems or Python libraries,
you can add these by extending the official image.</p>
<p>To do so, create a file named <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> in which you extend the official
image and add your custom dependencies. For example:</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span> # Extend the official Rasa SDK image
 FROM rasa/rasa-sdk:latest

 # The Rasa SDK image runs as non-root user by default. Hence, you have to switch
 # back to the <span class="sb">`</span>root<span class="sb">`</span> user <span class="k">if</span> you want to install additional dependencies.
 USER root

 # Add a custom system library <span class="o">(</span>e.g. git<span class="o">)</span>
 RUN apt-get update <span class="o">&amp;&amp;</span> <span class="se">\</span>
     apt-get install -y git

 # Add a custom python library <span class="o">(</span>e.g. jupyter<span class="o">)</span>
 RUN pip install --no-cache-dir jupyter

<span class="c"># Switch back to a non-root user</span>
<span class="k">USER</span><span class="s"> 1001</span>
</pre></div>
</div>
<p>You can then build the image via the following command, and use it in your
<code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> instead of the <code class="docutils literal notranslate"><span class="pre">rasa/rasa-sdk</span></code> image.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker build . -t &lt;name of your custom image&gt;:&lt;tag of your custom image&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="adding-a-custom-tracker-store">
<h3><a class="toc-backref" href="#id31">Adding a Custom Tracker Store</a><a class="headerlink" href="#adding-a-custom-tracker-store" title="Permalink to this headline">¶</a></h3>
<p>By default, all conversations are saved in memory. This means that all
conversations are lost as soon as you restart the Rasa server.
If you want to persist your conversations, you can use a different
<a class="reference internal" href="../../api/tracker-stores/#tracker-stores"><span class="std std-ref">Tracker Store</span></a>.</p>
<div class="section" id="using-postgresql-as-tracker-store">
<h4><a class="toc-backref" href="#id32">Using PostgreSQL as Tracker Store</a><a class="headerlink" href="#using-postgresql-as-tracker-store" title="Permalink to this headline">¶</a></h4>
<p>Start by adding PostgreSQL to your docker-compose file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">postgres</span><span class="p">:</span>
  <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">postgres:latest</span>
</pre></div>
</div>
<p>Then add PostgreSQL to the <code class="docutils literal notranslate"><span class="pre">tracker_store</span></code> section of your endpoint
configuration <code class="docutils literal notranslate"><span class="pre">config/endpoints.yml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">tracker_store</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sql</span>
  <span class="nt">dialect</span><span class="p">:</span> <span class="s">&quot;postgresql&quot;</span>
  <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">postgres</span>
  <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rasa</span>
</pre></div>
</div>
</div>
<div class="section" id="using-mongodb-as-tracker-store">
<h4><a class="toc-backref" href="#id33">Using MongoDB as Tracker Store</a><a class="headerlink" href="#using-mongodb-as-tracker-store" title="Permalink to this headline">¶</a></h4>
<p>Start by adding MongoDB to your docker-compose file. The following example
adds the MongoDB as well as a UI (you can skip this), which will be available
at <code class="docutils literal notranslate"><span class="pre">localhost:8081</span></code>. Username and password for the MongoDB instance are
specified as <code class="docutils literal notranslate"><span class="pre">rasa</span></code> and <code class="docutils literal notranslate"><span class="pre">example</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">mongo</span><span class="p">:</span>
  <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mongo</span>
  <span class="nt">environment</span><span class="p">:</span>
    <span class="nt">MONGO_INITDB_ROOT_USERNAME</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rasa</span>
    <span class="nt">MONGO_INITDB_ROOT_PASSWORD</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example</span>
<span class="nt">mongo-express</span><span class="p">:</span>
  <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mongo-express</span>
  <span class="nt">ports</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">8081:8081</span>
  <span class="nt">environment</span><span class="p">:</span>
    <span class="nt">ME_CONFIG_MONGODB_ADMINUSERNAME</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rasa</span>
    <span class="nt">ME_CONFIG_MONGODB_ADMINPASSWORD</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example</span>
</pre></div>
</div>
<p>Then add the MongoDB to the <code class="docutils literal notranslate"><span class="pre">tracker_store</span></code> section of your endpoints
configuration <code class="docutils literal notranslate"><span class="pre">endpoints.yml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">tracker_store</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mongod</span>
  <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mongodb://mongo:27017</span>
  <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rasa</span>
  <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example</span>
</pre></div>
</div>
<p>Then start all components with <code class="docutils literal notranslate"><span class="pre">docker-compose</span> <span class="pre">up</span></code>.</p>
</div>
<div class="section" id="using-redis-as-tracker-store">
<h4><a class="toc-backref" href="#id34">Using Redis as Tracker Store</a><a class="headerlink" href="#using-redis-as-tracker-store" title="Permalink to this headline">¶</a></h4>
<p>Start by adding Redis to your docker-compose file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">redis</span><span class="p">:</span>
  <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">redis:latest</span>
</pre></div>
</div>
<p>Then add Redis to the <code class="docutils literal notranslate"><span class="pre">tracker_store</span></code> section of your endpoint
configuration <code class="docutils literal notranslate"><span class="pre">endpoints.yml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">tracker_store</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">redis</span>
  <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">redis</span>
</pre></div>
</div>
</div>
<div class="section" id="using-a-custom-tracker-store-implementation">
<h4><a class="toc-backref" href="#id35">Using a Custom Tracker Store Implementation</a><a class="headerlink" href="#using-a-custom-tracker-store-implementation" title="Permalink to this headline">¶</a></h4>
<p>If you have a custom implementation of a tracker store you have two options
to add this store to Rasa:</p>
<blockquote>
<div><ul class="simple">
<li><p>extending the Rasa image</p></li>
<li><p>mounting it as volume</p></li>
</ul>
</div></blockquote>
<p>Then add the required configuration to your endpoint configuration
<code class="docutils literal notranslate"><span class="pre">endpoints.yml</span></code> as it is described in <a class="reference internal" href="../../api/tracker-stores/#tracker-stores"><span class="std std-ref">Tracker Stores</span></a>.
If you want the tracker store component (e.g. a certain database) to be part
of your Docker Compose file, add a corresponding service and configuration
there.</p>
</div>
</div>
</div>
</div>


          </div>

          <div class="footer">
            <div class="questions">
              Stuck?
              <a class="reference external" href="https://forum.rasa.com" target="_blank">Ask a Question</a>
              or
              <a class="reference external" href="https://github.com/rasahq/rasa/issues" target="_blank">Create an Issue</a>
            </div>
            <div class="social">
              <a href="https://github.com/RasaHQ" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
              <a href="https://stackoverflow.com/search?q=rasa" target="_blank" title="Stack Overflow"><i class="fab fa-stack-overflow"></i></a>
              <a href="https://www.youtube.com/channel/UCJ0V6493mLvqdiVwOKWBODQ" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
              <a href="https://twitter.com/rasa_hq" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>
            </div>

            <div class="copyright small">
            &copy;2020, Rasa Technologies | <a href="https://rasa.com/imprint/" target="_blank">Imprint</a> | <a href="https://rasa.com/privacy-policy/" target="_blank">Privacy Policy</a>
            
            </div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>

    

  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag(...arguments) {
      dataLayer.push(...arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-87333416-1', {
      'anonymize_ip': true,
    });
  </script>
  <script src="https://rasa.com/assets/js/js.cookies.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://www.googletagmanager.com/gtag/js?id=UA-87333416-1"></script>
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://rasa.com/assets/js/userId.js"></script>

  <script type="text/javascript">
    var clipboard = new ClipboardJS('.copyable');
    clipboard.on('success', function(e) {
      gtag('event', e.action, {
        'event_category': 'code',
        'event_label': e.text
      });
      const id = e.text.replace(/ /g,'-');
      document.getElementById(id).classList.add('visible');
      setTimeout(function(){
        document.getElementById(id).classList.remove('visible');},
        800
      );
    });
    clipboard.on('error', function(e) {
      console.log(e);
    });

  </script>

  <!-- ACE Editor, Train & download buttons -->
  <script>
    let updateIntervalId;

    function uuidv4() {
      return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
              (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
      );
    }

    function fetchTracker(url, chatBlockId, conversationId) {
      $.ajax({
        url: url + "/conversations/" + conversationId + "/tracker",
        method: "get",
        dataType: 'json',
        contentType: 'application/json',
        success: function(tracker, status) {
          initChatBlock(url, chatBlockId, conversationId, tracker);
        }
      });
    }

    function sendMessage(url, chatBlockId, conversationId, tracker, message) {
      $.ajax({
        url: url + "/webhooks/rest/webhook",
        method: "post",
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify({
          sender: conversationId,
          message: message
        }),
        success: function(result, status) {
          fetchTracker(url, chatBlockId, conversationId);
        },
      });
    }

    function startFetchingTracker(url, chatBlockId, conversationId) {
      const interval = 2000;

      fetchTracker(url, chatBlockId, conversationId);

      updateIntervalId = setInterval(() => {
        fetchTracker(url, chatBlockId, conversationId);
      }, interval);
    }

    function initChatBlock(url, id, conversationId, tracker) {
      ChatBlock.default.init({
        onSendMessage: (message) => {
          sendMessage(url, id, conversationId, tracker, message);
        },
        username: conversationId,
        tracker: tracker,
        selector: id
      });
    }

    const chatBlockId = '#rasa-chat-block';
    const trackingId = uuidv4();

    $(document).ready(() => {
      // make editors work
      const editors = document.querySelectorAll('.ace-editor');

      const assignTrainingDataToButton = function(e, id, trainButton) {
        const trainingData = trainButton.data('training');

        trainButton.data('training', JSON.stringify({
          ...JSON.parse(trainingData || "{}") || {},
          [id]: e.getValue(),
        }));
      };

      ace.config.set('modePath', "/_static/ace/src-min-noconflict");

      Array.from(editors).forEach(function(editor) {
        const e = ace.edit(editor);
        const id = editor.dataset['id'];
        const trackingEndpoint = editor.dataset['tr-endpoint'];

        e.session.setMode("ace/mode/" + editor.dataset['language']);
        e.renderer.setShowGutter(false);
        e.renderer.setShowPrintMargin(false);
        e.renderer.setPadding(24);
        e.renderer.setScrollMargin(24);
        e.setHighlightActiveLine(false);

        if (trackingEndpoint) {
          e.on("change", function() {
            if (!editor.dataset.hasChanged) {
              editor.dataset.hasChanged = true;
              $.ajax({
                url: trackingEndpoint,
                method: "POST",
                data: {editor: id},
              });
            }
          });
        }

        const trainButton = $('.train__button');

        assignTrainingDataToButton(e, id, trainButton);
        e.on("blur", function() {
          assignTrainingDataToButton(e, id, trainButton);
        });

        editor.style.height = editor.dataset['height'] + 'px';
      });

      // initialize a chat block
      initChatBlock("", chatBlockId, trackingId, {});
    });

    // set train button callback
    $( ".train__button" ).click(function() {
      const trainButton = $('.train__button');
      const trainSpinner = $('.train__spinner');
      const downloadButton = $('.download__button');

      trainButton.prop("disabled", true);
      downloadButton.prop("disabled", true);
      trainSpinner.removeClass('train__spinner--hidden');

      if (updateIntervalId) {
        clearInterval(updateIntervalId);
        initChatBlock("", chatBlockId, trackingId, {});
      }

      $.ajax({
        url: trainButton.data('endpoint'),
        method: trainButton.data('method'),
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify({ tracking_id: trackingId, ...JSON.parse(trainButton.data('training')) }),
        success: function(result, status) {
          trainSpinner.addClass('train__spinner--hidden');
          trainButton.prop("disabled", false);

          if (result['project_download_url']) {
            trainSpinner.addClass('train__spinner--hidden');
            downloadButton.prop("disabled", false);
            downloadButton.data("url", result['project_download_url']);
          }

          if (result['rasa_service_url']) {
            const conversationId = uuidv4();
            startFetchingTracker(result['rasa_service_url'], chatBlockId, conversationId);
          }
        },
        error: function(result, status) {
          trainSpinner.addClass('train__spinner--hidden');
          trainButton.prop("disabled", false);
        }
      });
    });

    // set download button callback
    $( ".download__button" ).click(function() {
      const downloadButton = $('.download__button');
      const url = downloadButton.data("url");

      if (url) {
        location.href = url;
      }
    });
  </script>

  <!-- Dismissable announcement banner -->
  <script>
    var banners = document.querySelectorAll('.announcement-banner');

    Array.from(banners).forEach(function(banner) {
      var cookie_id = banner.dataset['cookie-id'];

      if (localStorage.getItem(cookie_id) !== 'true') {
        banner.classList.add('announcement-banner--visible');
      }

      var bannerCloseButton = banner.querySelector('.announcement-banner__close');

      bannerCloseButton && bannerCloseButton.addEventListener('click', function() {
        localStorage.setItem(cookie_id, 'true');
        banner.classList.remove('announcement-banner--visible');
      });
    });
  </script>

  <!-- onsite anchor fix (otherwise anchors scroll to far) -->
  <script>
    /* Adapted from https://stackoverflow.com/a/13067009/1906073 */
    (function(document, history, location) {
      var HISTORY_SUPPORT = !!(history && history.pushState);

      var anchorScrolls = {
        ANCHOR_REGEX: /^#[^ ]+$/,
        OFFSET_HEIGHT_PX: 66,

        /**
         * Establish events, and fix initial scroll position if a hash is provided.
         */
        init: function() {
          this.scrollToCurrent();
          $(window).on('hashchange', $.proxy(this, 'scrollToCurrent'));
          $('body').on('click', 'a', $.proxy(this, 'delegateAnchors'));
        },

        /**
         * Return the offset amount to deduct from the normal scroll position.
         * Modify as appropriate to allow for dynamic calculations
         */
        getFixedOffset: function() {
          return this.OFFSET_HEIGHT_PX;
        },

        /**
         * If the provided href is an anchor which resolves to an element on the
         * page, scroll to it.
         * @param  {String} href
         * @return {Boolean} - Was the href an anchor.
         */
        scrollIfAnchor: function(href, pushToHistory) {
          var match, anchorOffset;

          if(!this.ANCHOR_REGEX.test(href)) {
            return false;
          }

          match = document.getElementById(href.slice(1));

          if(match) {
            anchorOffset = $(match).offset().top - this.getFixedOffset();
            $('html, body').animate({ scrollTop: anchorOffset});

            // Add the state to history as-per normal anchor links
            if(HISTORY_SUPPORT && pushToHistory) {
              history.pushState({}, document.title, location.pathname + href);
            }
          }

          return !!match;
        },

        /**
         * Attempt to scroll to the current location's hash.
         */
        scrollToCurrent: function(e) {
          if(this.scrollIfAnchor(window.location.hash) && e) {
            e.preventDefault();
          }
        },

        /**
         * If the click event's target was an anchor, fix the scroll position.
         */
        delegateAnchors: function(e) {
          var elem = e.target;

          if(this.scrollIfAnchor(elem.getAttribute('href'), true)) {
            e.preventDefault();
          }
        }
      };

      $(document).ready($.proxy(anchorScrolls, 'init'));
    })(window.document, window.history, window.location);

  </script>
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://rasa.com/assets/js/u-info.js"></script>
      <div class="webchat-banner webchat-banner--hidden">
        <img src="https://rasa.com/assets/img/demo/sara_avatar.png" class="webchat-banner__avatar" alt="">
        👋 I can help you get started with Rasa and answer your technical questions.
        <button class="webchat-banner__close">
          <i class="fas fa-times"></i> 
        </button>
      </div>
      <div id="webchat">
        <script src="../../_static/rasa-webchat.js"></script>
        <script>
          WebChat.default.init({
            selector: "#webchat",
            initPayload: "/greet",
            socketUrl: "https://website-demo.rasa.com/",
            socketPath: "/socket.io",
            title: "Sara",
            subtitle: "I'm still in development",
            profileAvatar: "https://rasa.com/assets/img/demo/sara_avatar.png",
            showCloseButton: true,
            fullScreenMode: false,
            hideWhenNotConnected: false,
            connectOn: "open",
            autoClearCache: true,
            linksOpenTab: false,
            openLauncherImage: "../../_static/chat-icon.svg",
            customMessageDelay: (message) => {
              return 900 + message.length;
            },
            params: {
              storage: "local"
            },
            onWidgetEvent: {
              onChatOpen: () => {
                const webchatBanner = document.querySelector('.webchat-banner');
                if (webchatBanner) {
                  localStorage.setItem('WEBCHAT_BANNER_DISMISSED', 'true');
                  webchatBanner.classList.add('webchat-banner--hidden');
                }
              }
            }
          });

          try {
            const webchatBanner = document.querySelector('.webchat-banner');

            if (webchatBanner) {
              if (localStorage.getItem('WEBCHAT_BANNER_DISMISSED') !== 'true') {
                webchatBanner.classList.remove('webchat-banner--hidden');
              }

              const webChatBannerClose = document.querySelector('.webchat-banner__close');

              webChatBannerClose && webChatBannerClose.addEventListener('click', function() {
                localStorage.setItem('WEBCHAT_BANNER_DISMISSED', 'true');
                webchatBanner.classList.add('webchat-banner--hidden');
              });
            }
          } catch (e) {}
        </script>
      </div>
  </body>
</html>