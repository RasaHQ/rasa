
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing Your Assistant</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/banner.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.js"></script>
    <script src="../../_static/sphinx_tabs/tabs.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Setting up CI/CD" href="../setting-up-ci-cd/" />
    <link rel="prev" title="Custom Connectors" href="../connectors/custom-connectors/" />

  <!-- Google Tag Manager -->
  <script type="opt-in" data-type="application/javascript" data-name="analytics">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MMHSZCS');</script>
  <!-- End Google Tag Manager -->
   
  
  <meta itemprop="image" content="https://rasa.com/assets/img/facebook-og.png">
  <meta property="og:title" content="Testing Your Assistant" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rasa.com/assets/img/facebook-og.png" />
  <meta property="og:url" content="https://rasa.com/docs/rasa/user-guide/testing-your-assistant" />
  
    <meta name="description" content="Test your Rasa Open Source assistant to validate and improve your
conversations" />
    <meta itemprop="description" content="Test your Rasa Open Source assistant to validate and improve your
conversations">
    <meta name="twitter:description" content="Test your Rasa Open Source assistant to validate and improve your
conversations" />
    <meta property="og:description" content="Test your Rasa Open Source assistant to validate and improve your
conversations" />
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Rasa_HQ">
  <meta name="twitter:title" content="Testing Your Assistant">
  <meta name="twitter:creator" content="@Rasa_HQ">
  <meta name="twitter:image" content="https://rasa.com/assets/img/facebook-og.png">

  <link rel="stylesheet" href="../../_static/xq-light.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/fontawesome/css/fontawesome-all.css" type="text/css" />
  <link rel="stylesheet" type="text/css" href="https://rasa.com/assets/css/klaro.css">
  <script defer type="text/javascript" src="https://rasa.com/assets/js/klaro_config.js"></script>
  <script defer type="text/javascript" src="https://rasa.com/assets/js/klaro.js"></script>
  <script defer type="text/javascript" src="../../_static/ace/src-min-noconflict/ace.js"></script>
  <script defer type="text/javascript" src="../../_static/chatblock/rasa-chatblock.min.js"></script>
  <script type="text/javascript" src="https://storage.googleapis.com/docs-theme/clipboard.min.js"></script>
  
    <link rel="icon" sizes="192x192" href="../../_static/icon-192x192.png">
    <link rel="apple-touch-icon" href="../../_static/icon-192x192.png" />
  
  
    
      <link rel="canonical" href="https://rasa.com/docs/rasa/user-guide/testing-your-assistant/"/>
    
  


  </head><body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe data-name="analytics" data-src="https://www.googletagmanager.com/ns.html?id=GTM-MMHSZCS" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="announce-bar" role="banner">
  These docs are for version 1.x of Rasa Open Source.
  <a href="https://rasa.com/docs/rasa/">Docs for the new version 2.0 can be found here.</a>
</div>

<div class="nav-top">
  <div class="nav-container">
    <ul class="main-nav nav">
      <li>
      <a href="https://rasa.com/docs/" class="brand-link">
          <img src="../../_static/rasa_logo.svg" width="80px" height="40px" title="Rasa logo" alt="Rasa logo">
    	    <span class="logo extension">docs</span>
    	</a>
      </li>
    </ul>
    <ul class="secondary-nav nav">
      <li>
        <a href="https://github.com/rasaHQ/" target="_blank"><button class="button btn-ghost white"> <i class="fab fa-github"></i>GitHub</button></a>
      </li>
      <li>
        <a href="https://forum.rasa.com" target="_blank"><button class="button"><i class="fas fa-comments"></i> Ask the Community</button></a>
      </li>
    </ul>
  </div>
</div>

  
    
      <div class="sidebar-extended"></div>
    
  

  
    
      <div class="document">
    
  

    
      
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rasa-tutorial/">Tutorial: Rasa Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building-assistants/">Tutorial: Building Assistants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command-line-interface/">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../messaging-and-voice-channels/">Messaging and Voice Channels</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Testing Your Assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setting-up-ci-cd/">Setting up CI/CD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validate-files/">Validate Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuring-http-api/">Configuring the HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to-deploy/">Deploying Your Rasa Assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud-storage/">Cloud Storage</a></li>
</ul>
<p class="caption"><span class="caption-text">NLU</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/about/">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/using-nlu-only/">Using NLU Only</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/training-data-format/">Training Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/language-support/">Language Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/choosing-a-pipeline/">Choosing a Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/components/">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlu/entity-extraction/">Entity Extraction</a></li>
</ul>
<p class="caption"><span class="caption-text">Core</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core/about/">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/stories/">Stories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/domains/">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/responses/">Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/actions/">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/reminders-and-external-events/">Reminders and External Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/policies/">Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/slots/">Slots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/forms/">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/retrieval-actions/">Retrieval Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/interactive-learning/">Interactive Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/fallback-actions/">Fallback Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/knowledge-bases/">Knowledge Base Actions</a></li>
</ul>
<p class="caption"><span class="caption-text">Conversation Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/dialogue-elements/">Dialogue Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/small-talk/">Small Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/completing-tasks/">Completing Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dialogue-elements/guiding-users/">Guiding Users</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/action-server/">Action Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/http-api/">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/jupyter-notebooks/">Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/agent/">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/custom-nlu-components/">Custom NLU Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/rasa-sdk/">Rasa SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/events/">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tracker/">Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tracker-stores/">Tracker Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/event-brokers/">Event Brokers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/lock-stores/">Lock Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/training-data-importers/">Training Data Importers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/core-featurization/">Featurization of Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tensorflow_usage/">TensorFlow Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guide/">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/">Rasa Open Source Change Log</a></li>
</ul>
<p class="caption"><span class="caption-text">Migrate from (beta)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/google-dialogflow-to-rasa/">Dialogflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/facebook-wit-ai-to-rasa/">Wit.ai</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/microsoft-luis-to-rasa/">LUIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate-from/ibm-watson-to-rasa/">IBM Watson</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a></li>
</ul>

<div class="versions">
    <p class="caption">Versions</p>
    <div class="versions-content">
      <div>
        <span class="current-version">
          viewing: 1.10.3
        </span>
      </div>
      <div class="other-versions">
          <p>tags</p>
          <div class="dropdown-content">
              <a href="../../../1.10.19/user-guide/testing-your-assistant/">1.10.19</a>
              <a href="../../../1.10.18/user-guide/testing-your-assistant/">1.10.18</a>
              <a href="../../../1.10.17/user-guide/testing-your-assistant/">1.10.17</a>
              <a href="../../../1.10.16/user-guide/testing-your-assistant/">1.10.16</a>
              <a href="../../../1.10.15/user-guide/testing-your-assistant/">1.10.15</a>
              <a href="../../../1.10.14/user-guide/testing-your-assistant/">1.10.14</a>
              <a href="../../../1.10.13/user-guide/testing-your-assistant/">1.10.13</a>
              <a href="../../../1.10.12/user-guide/testing-your-assistant/">1.10.12</a>
              <a href="../../../1.10.11/user-guide/testing-your-assistant/">1.10.11</a>
              <a href="../../../1.10.10/user-guide/testing-your-assistant/">1.10.10</a>
              <a href="../../../1.10.9/user-guide/testing-your-assistant/">1.10.9</a>
              <a href="../../../1.10.8/user-guide/testing-your-assistant/">1.10.8</a>
              <a href="../../../1.10.7/user-guide/testing-your-assistant/">1.10.7</a>
              <a href="../../../1.10.6/user-guide/testing-your-assistant/">1.10.6</a>
              <a href="../../../1.10.5/user-guide/testing-your-assistant/">1.10.5</a>
              <a href="../../../1.10.4/user-guide/testing-your-assistant/">1.10.4</a>
              <a href="../../../1.10.3/user-guide/testing-your-assistant/">1.10.3</a>
              <a href="../../../1.10.2/user-guide/testing-your-assistant/">1.10.2</a>
              <a href="../../../1.10.1/user-guide/testing-your-assistant/">1.10.1</a>
              <a href="../../../1.10.0/user-guide/testing-your-assistant/">1.10.0</a>
              <a href="../../../1.9.7/user-guide/testing-your-assistant/">1.9.7</a>
              <a href="../../../1.9.6/user-guide/testing-your-assistant/">1.9.6</a>
              <a href="../../../1.9.5/user-guide/testing-your-assistant/">1.9.5</a>
              <a href="../../../1.9.4/user-guide/testing-your-assistant/">1.9.4</a>
              <a href="../../../1.9.3/user-guide/testing-your-assistant/">1.9.3</a>
              <a href="../../../1.9.2/user-guide/testing-your-assistant/">1.9.2</a>
              <a href="../../../1.9.1/user-guide/testing-your-assistant/">1.9.1</a>
              <a href="../../../1.9.0/user-guide/testing-your-assistant/">1.9.0</a>
              <a href="../../../1.8.3/index/">1.8.3</a>
              <a href="../../../1.8.2/index/">1.8.2</a>
              <a href="../../../1.8.1/index/">1.8.1</a>
              <a href="../../../1.8.0/index/">1.8.0</a>
              <a href="../../../1.7.4/index/">1.7.4</a>
              <a href="../../../1.7.3/index/">1.7.3</a>
              <a href="../../../1.7.2/index/">1.7.2</a>
              <a href="../../../1.7.1/index/">1.7.1</a>
              <a href="../../../1.7.0/index/">1.7.0</a>
              <a href="../../../1.6.2/index/">1.6.2</a>
              <a href="../../../1.5.3/index/">1.5.3</a>
              <a href="../../../1.4.6/index/">1.4.6</a>
              <a href="../../../1.3.10/index/">1.3.10</a>
              <a href="../../../1.2.9/index/">1.2.9</a>
          </div>
      </div>
    </div>
</div>


        </div>
      </div>
      
    
      
        
      
        <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  


    
    



    <p class="scv-banner"><a href="../../../1.10.19/user-guide/testing-your-assistant/"><b>Warning:</b> This document is for an old version of Rasa. The latest version is 1.10.19.</a></p>
<div class="section" id="testing-your-assistant">
<span id="id1"></span><h1>Testing Your Assistant<a class="headerlink" href="#testing-your-assistant" title="Permalink to this headline">¶</a></h1>

  <div class="edit-link">
    <a class="reference external" href="https://github.com/RasaHQ/rasa/edit/master/docs/user-guide/testing-your-assistant.rst" target="_blank"><i class="fab fa-github" style="font-size: 85%; padding-right: 4px;"></i>SUGGEST EDITS</a>
  </div><div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#end-to-end-testing" id="id4">End-to-End Testing</a></p></li>
<li><p><a class="reference internal" href="#evaluating-an-nlu-model" id="id5">Evaluating an NLU Model</a></p>
<ul>
<li><p><a class="reference internal" href="#comparing-nlu-pipelines" id="id6">Comparing NLU Pipelines</a></p></li>
<li><p><a class="reference internal" href="#intent-classification" id="id7">Intent Classification</a></p></li>
<li><p><a class="reference internal" href="#response-selection" id="id8">Response Selection</a></p></li>
<li><p><a class="reference internal" href="#entity-extraction" id="id9">Entity Extraction</a></p></li>
<li><p><a class="reference internal" href="#entity-scoring" id="id10">Entity Scoring</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#evaluating-a-core-model" id="id11">Evaluating a Core Model</a></p></li>
<li><p><a class="reference internal" href="#comparing-core-configurations" id="id12">Comparing Core Configurations</a></p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are looking to tune the hyperparameters of your NLU model,
check out this <a class="reference external" href="https://blog.rasa.com/rasa-nlu-in-depth-part-3-hyperparameters/">tutorial</a>.</p>
</div>
<div class="section" id="end-to-end-testing">
<span id="id2"></span><h2><a class="toc-backref" href="#id4">End-to-End Testing</a><a class="headerlink" href="#end-to-end-testing" title="Permalink to this headline">¶</a></h2>
<p>Rasa Open Source lets you test dialogues end-to-end by running through
test conversations and making sure that both NLU and Core make correct predictions.</p>
<p>To do this, you need some stories in the end-to-end format,
which includes both the NLU output and the original text.
Here are some examples:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-QmFzaWNz docutils container">
<div class="docutils container">
<p>Basics</p>
</div>
</div>
<div class="item sphinx-data-tab-Q3VzdG9tIEFjdGlvbnM= docutils container">
<div class="docutils container">
<p>Custom Actions</p>
</div>
</div>
<div class="item sphinx-data-tab-Rm9ybXMgSGFwcHkgUGF0aA== docutils container">
<div class="docutils container">
<p>Forms Happy Path</p>
</div>
</div>
<div class="item sphinx-data-tab-Rm9ybXMgVW5oYXBweSBQYXRo docutils container">
<div class="docutils container">
<p>Forms Unhappy Path</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-QmFzaWNz active docutils container">
<div class="highlight-story notranslate"><div class="highlight"><pre><span></span><span class="gh">## A basic end-to-end test</span>
<span class="vm">* greet: </span>hello
   - utter_ask_howcanhelp
<span class="vm">* inform: </span>show me [chinese](cuisine) restaurants
   - utter_ask_location
<span class="vm">* inform: </span>in [Paris](location)
   - utter_ask_price
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-Q3VzdG9tIEFjdGlvbnM= docutils container">
<div class="highlight-story notranslate"><div class="highlight"><pre><span></span><span class="gh">## End-to-End tests where a custom action appends events</span>
<span class="vm">* greet: </span>hi
    - my_custom_action
    <span class="k">&lt;!--</span><span class="c c-MultiLine"> The following events are emitted by `my_custom_action` </span><span class="k">--&gt;</span><span class="o"></span>
<span class="o">    - slot</span><span class="p">{</span><span class="nt">&quot;my_slot&quot;</span><span class="p">:</span> <span class="s2">&quot;value added by custom action&quot;</span><span class="p">}</span>
    - utter_ask_age
<span class="vm">* thankyou: </span>thanks
    - utter_noworries
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-Rm9ybXMgSGFwcHkgUGF0aA== docutils container">
<div class="highlight-story notranslate"><div class="highlight"><pre><span></span><span class="gh">## Testing a conversation with a form</span>
<span class="vm">* greet: </span>hi
    - utter_greet
<span class="vm">* request_restaurant: </span>im looking for a restaurant
    - restaurant_form
    - form{&quot;name&quot;: &quot;restaurant_form&quot;}
<span class="vm">* inform: </span>[afghan](cuisine) food
    - form: restaurant_form
    - form{&quot;name&quot;: null}
    - utter_slots_values
<span class="vm">* thankyou: </span>thanks
    - utter_noworries
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-Rm9ybXMgVW5oYXBweSBQYXRo docutils container">
<div class="highlight-story notranslate"><div class="highlight"><pre><span></span><span class="gh">## Testing a conversation with a form and unexpected user input</span>
<span class="vm">* greet: </span>hi
    - utter_greet
<span class="vm">* request_restaurant: </span>im looking for a restaurant
    - restaurant_form
    - form{&quot;name&quot;: &quot;restaurant_form&quot;}
<span class="k">&lt;!--</span><span class="c c-MultiLine"> The user sends a message which should not be handled by the form. </span><span class="k">--&gt;</span><span class="vm"></span>
<span class="vm">* chitchat: </span>can you share your boss with me?
    - utter_chitchat
    - restaurant_form
    - form{&quot;name&quot;: null}
    - utter_slots_values
<span class="vm">* thankyou: </span>thanks
    - utter_noworries
</pre></div>
</div>
</div>
</div>
<p>By default Rasa Open Source saves conversation tests to <code class="docutils literal notranslate"><span class="pre">tests/conversation_tests.md</span></code>.
You can test your assistant against them by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ rasa <span class="nb">test</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="../../core/actions/#custom-actions"><span class="std std-ref">Custom Actions</span></a> are not executed as part of end-to-end tests. If your custom
actions append any events to the tracker, this has to be reflected in your end-to-end
tests (e.g. by adding <code class="docutils literal notranslate"><span class="pre">slot</span></code> events to your end-to-end story).</p>
</div>
<p>If you have any questions or problems, please share them with us in the dedicated
<a class="reference external" href="https://forum.rasa.com/tags/testing">testing section on our forum</a> !</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure your model file in <code class="docutils literal notranslate"><span class="pre">models</span></code> is a combined <code class="docutils literal notranslate"><span class="pre">core</span></code>
and <code class="docutils literal notranslate"><span class="pre">nlu</span></code> model. If it does not contain an NLU model, Core will use
the default <code class="docutils literal notranslate"><span class="pre">RegexInterpreter</span></code>.</p>
</div>
</div>
<div class="section" id="evaluating-an-nlu-model">
<span id="nlu-evaluation"></span><h2><a class="toc-backref" href="#id5">Evaluating an NLU Model</a><a class="headerlink" href="#evaluating-an-nlu-model" title="Permalink to this headline">¶</a></h2>
<p>A standard technique in machine learning is to keep some data separate as a <em>test set</em>.
You can <a class="reference internal" href="../command-line-interface/#train-test-split"><span class="std std-ref">split your NLU training data</span></a>
into train and test sets using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rasa data split nlu
</pre></div>
</div>
<p>If you’ve done this, you can see how well your NLU model predicts the test cases using this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rasa <span class="nb">test</span> nlu -u train_test_split/test_data.md --model models/nlu-20180323-145833.tar.gz
</pre></div>
</div>
<p>If you don’t want to create a separate test set, you can
still estimate how well your model generalises using cross-validation.
To do this, add the flag <code class="docutils literal notranslate"><span class="pre">--cross-validation</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rasa <span class="nb">test</span> nlu -u data/nlu.md --config config.yml --cross-validation
</pre></div>
</div>
<p>The full list of options for the script is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>usage: rasa test nlu [-h] [-v] [-vv] [--quiet] [-m MODEL] [-u NLU] [--out OUT]
                     [--successes] [--no-errors] [--histogram HISTOGRAM]
                     [--confmat CONFMAT] [-c CONFIG [CONFIG ...]]
                     [--cross-validation] [-f FOLDS] [-r RUNS]
                     [-p PERCENTAGES [PERCENTAGES ...]] [--no-plot]

optional arguments:
  -h, --help            show this help message and exit
  -m MODEL, --model MODEL
                        Path to a trained Rasa model. If a directory is
                        specified, it will use the latest model in this
                        directory. (default: models)
  -u NLU, --nlu NLU     File or folder containing your NLU data. (default:
                        data)
  --out OUT             Output path for any files created during the
                        evaluation. (default: results)
  --successes           If set successful predictions (intent and entities)
                        will be written to a file. (default: False)
  --no-errors           If set incorrect predictions (intent and entities)
                        will NOT be written to a file. (default: False)
  --histogram HISTOGRAM
                        Output path for the confidence histogram. (default:
                        hist.png)
  --confmat CONFMAT     Output path for the confusion matrix plot. (default:
                        confmat.png)
  -c CONFIG [CONFIG ...], --config CONFIG [CONFIG ...]
                        Model configuration file. If a single file is passed
                        and cross validation mode is chosen, cross-validation
                        is performed, if multiple configs or a folder of
                        configs are passed, models will be trained and
                        compared directly. (default: None)
  --no-plot             Don&#39;t render evaluation plots (default: False)

Python Logging Options:
  -v, --verbose         Be verbose. Sets logging level to INFO. (default:
                        None)
  -vv, --debug          Print lots of debugging statements. Sets logging level
                        to DEBUG. (default: None)
  --quiet               Be quiet! Sets logging level to WARNING. (default:
                        None)

Cross Validation:
  --cross-validation    Switch on cross validation mode. Any provided model
                        will be ignored. (default: False)
  -f FOLDS, --folds FOLDS
                        Number of cross validation folds (cross validation
                        only). (default: 5)

Comparison Mode:
  -r RUNS, --runs RUNS  Number of comparison runs to make. (default: 3)
  -p PERCENTAGES [PERCENTAGES ...], --percentages PERCENTAGES [PERCENTAGES ...]
                        Percentages of training data to exclude during
                        comparison. (default: [0, 25, 50, 75])
</pre></div>
</div>
<div class="section" id="comparing-nlu-pipelines">
<span id="id3"></span><h3><a class="toc-backref" href="#id6">Comparing NLU Pipelines</a><a class="headerlink" href="#comparing-nlu-pipelines" title="Permalink to this headline">¶</a></h3>
<p>By passing multiple pipeline configurations (or a folder containing them) to the CLI, Rasa will run
a comparative examination between the pipelines.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ rasa <span class="nb">test</span> nlu --config pretrained_embeddings_spacy.yml supervised_embeddings.yml
  --nlu data/nlu.md --runs <span class="m">3</span> --percentages <span class="m">0</span> <span class="m">25</span> <span class="m">50</span> <span class="m">70</span> <span class="m">90</span>
</pre></div>
</div>
<p>The command in the example above will create a train/test split from your data,
then train each pipeline multiple times with 0, 25, 50, 70 and 90% of your intent data excluded from the training set.
The models are then evaluated on the test set and the f1-score for each exclusion percentage is recorded. This process
runs three times (i.e. with 3 test sets in total) and then a graph is plotted using the means and standard deviations of
the f1-scores.</p>
<p>The f1-score graph - along with all train/test sets, the trained models, classification and error reports - will be saved into a folder
called <code class="docutils literal notranslate"><span class="pre">nlu_comparison_results</span></code>.</p>
</div>
<div class="section" id="intent-classification">
<h3><a class="toc-backref" href="#id7">Intent Classification</a><a class="headerlink" href="#intent-classification" title="Permalink to this headline">¶</a></h3>
<p>The evaluation script will produce a report, confusion matrix,
and confidence histogram for your model.</p>
<p>The report logs precision, recall and f1 measure for
each intent and entity, as well as providing an overall average.
You can save these reports as JSON files using the <code class="docutils literal notranslate"><span class="pre">--report</span></code> argument.</p>
<p>The confusion matrix shows you which
intents are mistaken for others; any samples which have been
incorrectly predicted are logged and saved to a file
called <code class="docutils literal notranslate"><span class="pre">errors.json</span></code> for easier debugging.</p>
<p>The histogram that the script produces allows you to visualise the
confidence distribution for all predictions,
with the volume of correct and incorrect predictions being displayed by
blue and red bars respectively.
Improving the quality of your training data will move the blue
histogram bars to the right and the red histogram bars
to the left of the plot.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If any of your entities are incorrectly annotated, your evaluation may fail. One common problem
is that an entity cannot stop or start inside a token.
For example, if you have an example for a <code class="docutils literal notranslate"><span class="pre">name</span></code> entity
like <code class="docutils literal notranslate"><span class="pre">[Brian](name)'s</span> <span class="pre">house</span></code>, this is only valid if your tokenizer splits <code class="docutils literal notranslate"><span class="pre">Brian's</span></code> into
multiple tokens. A whitespace tokenizer would not work in this case.</p>
</div>
</div>
<div class="section" id="response-selection">
<h3><a class="toc-backref" href="#id8">Response Selection</a><a class="headerlink" href="#response-selection" title="Permalink to this headline">¶</a></h3>
<p>The evaluation script will produce a combined report for all response selector models in your pipeline.</p>
<p>The report logs precision, recall and f1 measure for
each response, as well as providing an overall average.
You can save these reports as JSON files using the <code class="docutils literal notranslate"><span class="pre">--report</span></code> argument.</p>
</div>
<div class="section" id="entity-extraction">
<h3><a class="toc-backref" href="#id9">Entity Extraction</a><a class="headerlink" href="#entity-extraction" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">CRFEntityExtractor</span></code> is the only entity extractor which you train using your own data,
and so is the only one that will be evaluated. If you use the spaCy or duckling
pre-trained entity extractors, Rasa NLU will not include these in the evaluation.</p>
<p>Rasa NLU will report recall, precision, and f1 measure for each entity type that
<code class="docutils literal notranslate"><span class="pre">CRFEntityExtractor</span></code> is trained to recognize.</p>
</div>
<div class="section" id="entity-scoring">
<h3><a class="toc-backref" href="#id10">Entity Scoring</a><a class="headerlink" href="#entity-scoring" title="Permalink to this headline">¶</a></h3>
<p>To evaluate entity extraction we apply a simple tag-based approach. We don’t consider BILOU tags, but only the
entity type tags on a per token basis. For location entity like “near Alexanderplatz” we
expect the labels <code class="docutils literal notranslate"><span class="pre">LOC</span> <span class="pre">LOC</span></code> instead of the BILOU-based <code class="docutils literal notranslate"><span class="pre">B-LOC</span> <span class="pre">L-LOC</span></code>. Our approach is more lenient
when it comes to evaluation, as it rewards partial extraction and does not punish the splitting of entities.
For example, given the aforementioned entity “near Alexanderplatz” and a system that extracts
“Alexanderplatz”, our approach rewards the extraction of “Alexanderplatz” and punishes the missed out word “near”.
The BILOU-based approach, however, would label this as a complete failure since it expects Alexanderplatz
to be labeled as a last token in an entity (<code class="docutils literal notranslate"><span class="pre">L-LOC</span></code>) instead of a single token entity (<code class="docutils literal notranslate"><span class="pre">U-LOC</span></code>). Note also that
a split extraction of “near” and “Alexanderplatz” would get full scores on our approach and zero on the
BILOU-based one.</p>
<p>Here’s a comparison between the two scoring mechanisms for the phrase “near Alexanderplatz tonight”:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 24%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>extracted</p></th>
<th class="head"><p>Simple tags (score)</p></th>
<th class="head"><p>BILOU tags (score)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[near Alexanderplatz](loc) [tonight](time)</p></td>
<td><p>loc loc time (3)</p></td>
<td><p>B-loc L-loc U-time (3)</p></td>
</tr>
<tr class="row-odd"><td><p>[near](loc) [Alexanderplatz](loc) [tonight](time)</p></td>
<td><p>loc loc time (3)</p></td>
<td><p>U-loc U-loc U-time (1)</p></td>
</tr>
<tr class="row-even"><td><p>near [Alexanderplatz](loc) [tonight](time)</p></td>
<td><p>O   loc time (2)</p></td>
<td><p>O     U-loc U-time (1)</p></td>
</tr>
<tr class="row-odd"><td><p>[near](loc) Alexanderplatz [tonight](time)</p></td>
<td><p>loc O   time (2)</p></td>
<td><p>U-loc O     U-time (1)</p></td>
</tr>
<tr class="row-even"><td><p>[near Alexanderplatz tonight](loc)</p></td>
<td><p>loc loc loc  (2)</p></td>
<td><p>B-loc I-loc L-loc  (1)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="evaluating-a-core-model">
<span id="core-evaluation"></span><h2><a class="toc-backref" href="#id11">Evaluating a Core Model</a><a class="headerlink" href="#evaluating-a-core-model" title="Permalink to this headline">¶</a></h2>
<p>You can evaluate your trained model on a set of test stories
by using the evaluate script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rasa <span class="nb">test</span> core --stories test_stories.md --out results
</pre></div>
</div>
<p>This will print the failed stories to <code class="docutils literal notranslate"><span class="pre">results/failed_stories.md</span></code>.
We count any story as <cite>failed</cite> if at least one of the actions
was predicted incorrectly.</p>
<p>In addition, this will save a confusion matrix to a file called
<code class="docutils literal notranslate"><span class="pre">results/story_confmat.pdf</span></code>. For each action in your domain, the confusion
matrix shows how often the action was correctly predicted and how often an
incorrect action was predicted instead.</p>
<p>The full list of options for the script is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>usage: rasa test core [-h] [-v] [-vv] [--quiet] [-m MODEL [MODEL ...]]
                      [-s STORIES] [--max-stories MAX_STORIES] [--out OUT]
                      [--e2e] [--endpoints ENDPOINTS]
                      [--fail-on-prediction-errors] [--url URL]
                      [--evaluate-model-directory] [--no-plot]

optional arguments:
  -h, --help            show this help message and exit
  -m MODEL [MODEL ...], --model MODEL [MODEL ...]
                        Path to a pre-trained model. If it is a &#39;tar.gz&#39; file
                        that model file will be used. If it is a directory,
                        the latest model in that directory will be used
                        (exception: &#39;--evaluate-model-directory&#39; flag is set).
                        If multiple &#39;tar.gz&#39; files are provided, all those
                        models will be compared. (default: [None])
  -s STORIES, --stories STORIES
                        File or folder containing your test stories. (default:
                        data)
  --max-stories MAX_STORIES
                        Maximum number of stories to test on. (default: None)
  --out OUT             Output path for any files created during the
                        evaluation. (default: results)
  --e2e, --end-to-end   Run an end-to-end evaluation for combined action and
                        intent prediction. Requires a story file in end-to-end
                        format. (default: False)
  --endpoints ENDPOINTS
                        Configuration file for the connectors as a yml file.
                        (default: None)
  --fail-on-prediction-errors
                        If a prediction error is encountered, an exception is
                        thrown. This can be used to validate stories during
                        tests, e.g. on travis. (default: False)
  --url URL             If supplied, downloads a story file from a URL and
                        trains on it. Fetches the data by sending a GET
                        request to the supplied URL. (default: None)
  --evaluate-model-directory
                        Should be set to evaluate models trained via &#39;rasa
                        train core --config &lt;config-1&gt; &lt;config-2&gt;&#39;. All models
                        in the provided directory are evaluated and compared
                        against each other. (default: False)
  --no-plot             Don&#39;t render evaluation plots (default: False)

Python Logging Options:
  -v, --verbose         Be verbose. Sets logging level to INFO. (default:
                        None)
  -vv, --debug          Print lots of debugging statements. Sets logging level
                        to DEBUG. (default: None)
  --quiet               Be quiet! Sets logging level to WARNING. (default:
                        None)
</pre></div>
</div>
</div>
<div class="section" id="comparing-core-configurations">
<h2><a class="toc-backref" href="#id12">Comparing Core Configurations</a><a class="headerlink" href="#comparing-core-configurations" title="Permalink to this headline">¶</a></h2>
<p>To choose a configuration for your core model, or to choose hyperparameters for a
specific policy, you want to measure how well Rasa Core will <cite>generalise</cite>
to conversations which it hasn’t seen before. Especially in the beginning
of a project, you do not have a lot of real conversations to use to train
your bot, so you don’t just want to throw some away to use as a test set.</p>
<p>Rasa Core has some scripts to help you choose and fine-tune your policy configuration.
Once you are happy with it, you can then train your final configuration on your
full data set. To do this, you first have to train models for your different
configurations. Create two (or more) config files including the policies you want to
compare, and then use the <code class="docutils literal notranslate"><span class="pre">compare</span></code> mode of the train script to train your models:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ rasa train core -c config_1.yml config_2.yml <span class="se">\</span>
  -d domain.yml -s stories_folder --out comparison_models --runs <span class="m">3</span> <span class="se">\</span>
  --percentages <span class="m">0</span> <span class="m">5</span> <span class="m">25</span> <span class="m">50</span> <span class="m">70</span> <span class="m">95</span>
</pre></div>
</div>
<p>For each policy configuration provided, Rasa Core will be trained multiple times
with 0, 5, 25, 50, 70 and 95% of your training stories excluded from the training
data. This is done for multiple runs to ensure consistent results.</p>
<p>Once this script has finished, you can use the evaluate script in <code class="docutils literal notranslate"><span class="pre">compare</span></code>
mode to evaluate the models you just trained:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ rasa <span class="nb">test</span> core -m comparison_models --stories stories_folder
--out comparison_results --evaluate-model-directory
</pre></div>
</div>
<p>This will evaluate each of the models on the provided stories
(can be either training or test set) and plot some graphs
to show you which policy performs best. By evaluating on the full set of stories, you
can measure how well Rasa Core is predicting the held-out stories.</p>
<p>To compare single policies create config files containing only one policy each.
If you’re not sure which policies to compare, we’d recommend trying out the
<code class="docutils literal notranslate"><span class="pre">EmbeddingPolicy</span></code> and the <code class="docutils literal notranslate"><span class="pre">KerasPolicy</span></code> to see which one works better for
you.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This training process can take a long time, so we’d suggest letting it run
somewhere in the background where it can’t be interrupted.</p>
</div>
</div>
</div>


          </div>

          <div class="footer">
            <div class="questions">
              Stuck?
              <a class="reference external" href="https://forum.rasa.com" target="_blank">Ask a Question</a>
              or
              <a class="reference external" href="https://github.com/rasahq/rasa/issues" target="_blank">Create an Issue</a>
            </div>
            <div class="social">
              <a href="https://github.com/RasaHQ" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
              <a href="https://stackoverflow.com/search?q=rasa" target="_blank" title="Stack Overflow"><i class="fab fa-stack-overflow"></i></a>
              <a href="https://www.youtube.com/channel/UCJ0V6493mLvqdiVwOKWBODQ" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
              <a href="https://twitter.com/rasa_hq" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>
            </div>

            <div class="copyright small">
            &copy;2020, Rasa Technologies | <a href="https://rasa.com/imprint/" target="_blank">Imprint</a> | <a href="https://rasa.com/privacy-policy/" target="_blank">Privacy Policy</a>
            
            </div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>


    

  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag(...arguments) {
      dataLayer.push(...arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-87333416-1', {
      'anonymize_ip': true,
    });
  </script>
  <script src="https://rasa.com/assets/js/js.cookies.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://www.googletagmanager.com/gtag/js?id=UA-87333416-1"></script>
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://rasa.com/assets/js/userId.js"></script>

  <script type="text/javascript">
    var clipboard = new ClipboardJS('.copyable');
    clipboard.on('success', function(e) {
      gtag('event', e.action, {
        'event_category': 'code',
        'event_label': e.text
      });
      const id = e.text.replace(/ /g,'-');
      document.getElementById(id).classList.add('visible');
      setTimeout(function(){
        document.getElementById(id).classList.remove('visible');},
        800
      );
    });
    clipboard.on('error', function(e) {
      console.log(e);
    });

  </script>

  <!-- ACE Editor, Train & download buttons -->
  <script>
    let updateIntervalId;

    function uuidv4() {
      return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
              (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
      );
    }

    function fetchTracker(url, chatBlockId, conversationId) {
      $.ajax({
        url: url + "/conversations/" + conversationId + "/tracker",
        method: "get",
        dataType: 'json',
        contentType: 'application/json',
        success: function(tracker, status) {
          initChatBlock(url, chatBlockId, conversationId, tracker);
        }
      });
    }

    function sendMessage(url, chatBlockId, conversationId, tracker, message) {
      $.ajax({
        url: url + "/webhooks/rest/webhook",
        method: "post",
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify({
          sender: conversationId,
          message: message
        }),
        success: function(result, status) {
          fetchTracker(url, chatBlockId, conversationId);
        },
      });
    }

    function startFetchingTracker(url, chatBlockId, conversationId) {
      const interval = 2000;

      fetchTracker(url, chatBlockId, conversationId);

      updateIntervalId = setInterval(() => {
        fetchTracker(url, chatBlockId, conversationId);
      }, interval);
    }

    function initChatBlock(url, id, conversationId, tracker) {
      ChatBlock.default.init({
        onSendMessage: (message) => {
          sendMessage(url, id, conversationId, tracker, message);
        },
        username: conversationId,
        tracker: tracker,
        selector: id
      });
    }

    const chatBlockId = '#rasa-chat-block';
    const trackingId = uuidv4();

    $(document).ready(() => {
      // make editors work
      const editors = document.querySelectorAll('.ace-editor');

      const assignTrainingDataToButton = function(e, id, trainButton) {
        const trainingData = trainButton.data('training');

        trainButton.data('training', JSON.stringify({
          ...JSON.parse(trainingData || "{}") || {},
          [id]: e.getValue(),
        }));
      };

      ace.config.set('modePath', "/_static/ace/src-min-noconflict");

      Array.from(editors).forEach(function(editor) {
        const e = ace.edit(editor);
        const id = editor.dataset['id'];
        const trackingEndpoint = editor.dataset['tr-endpoint'];

        e.session.setMode("ace/mode/" + editor.dataset['language']);
        e.renderer.setShowGutter(false);
        e.renderer.setShowPrintMargin(false);
        e.renderer.setPadding(24);
        e.renderer.setScrollMargin(24);
        e.setHighlightActiveLine(false);

        if (trackingEndpoint) {
          e.on("change", function() {
            if (!editor.dataset.hasChanged) {
              editor.dataset.hasChanged = true;
              $.ajax({
                url: trackingEndpoint,
                method: "POST",
                data: {editor: id},
              });
            }
          });
        }

        const trainButton = $('.train__button');

        assignTrainingDataToButton(e, id, trainButton);
        e.on("blur", function() {
          assignTrainingDataToButton(e, id, trainButton);
        });

        editor.style.height = editor.dataset['height'] + 'px';
      });

      // initialize a chat block
      initChatBlock("", chatBlockId, trackingId, {});
    });

    // set train button callback
    $( ".train__button" ).click(function() {
      const trainButton = $('.train__button');
      const trainSpinner = $('.train__spinner');
      const downloadButton = $('.download__button');

      trainButton.prop("disabled", true);
      downloadButton.prop("disabled", true);
      trainSpinner.removeClass('train__spinner--hidden');

      if (updateIntervalId) {
        clearInterval(updateIntervalId);
        initChatBlock("", chatBlockId, trackingId, {});
      }

      $.ajax({
        url: trainButton.data('endpoint'),
        method: trainButton.data('method'),
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify({ tracking_id: trackingId, ...JSON.parse(trainButton.data('training')) }),
        success: function(result, status) {
          trainSpinner.addClass('train__spinner--hidden');
          trainButton.prop("disabled", false);

          if (result['project_download_url']) {
            trainSpinner.addClass('train__spinner--hidden');
            downloadButton.prop("disabled", false);
            downloadButton.data("url", result['project_download_url']);
          }

          if (result['rasa_service_url']) {
            const conversationId = uuidv4();
            startFetchingTracker(result['rasa_service_url'], chatBlockId, conversationId);
          }
        },
        error: function(result, status) {
          trainSpinner.addClass('train__spinner--hidden');
          trainButton.prop("disabled", false);
        }
      });
    });

    // set download button callback
    $( ".download__button" ).click(function() {
      const downloadButton = $('.download__button');
      const url = downloadButton.data("url");

      if (url) {
        location.href = url;
      }
    });
  </script>

  <!-- Dismissable announcement banner -->
  <script>
    var banners = document.querySelectorAll('.announcement-banner');

    Array.from(banners).forEach(function(banner) {
      var cookie_id = banner.dataset['cookie-id'];

      if (localStorage.getItem(cookie_id) !== 'true') {
        banner.classList.add('announcement-banner--visible');
      }

      var bannerCloseButton = banner.querySelector('.announcement-banner__close');

      bannerCloseButton && bannerCloseButton.addEventListener('click', function() {
        localStorage.setItem(cookie_id, 'true');
        banner.classList.remove('announcement-banner--visible');
      });
    });
  </script>

  <!-- onsite anchor fix (otherwise anchors scroll to far) -->
  <script>
    /* Adapted from https://stackoverflow.com/a/13067009/1906073 */
    (function(document, history, location) {
      var HISTORY_SUPPORT = !!(history && history.pushState);

      var anchorScrolls = {
        ANCHOR_REGEX: /^#[^ ]+$/,
        OFFSET_HEIGHT_PX: 66,

        /**
         * Establish events, and fix initial scroll position if a hash is provided.
         */
        init: function() {
          this.scrollToCurrent();
          $(window).on('hashchange', $.proxy(this, 'scrollToCurrent'));
          $('body').on('click', 'a', $.proxy(this, 'delegateAnchors'));
        },

        /**
         * Return the offset amount to deduct from the normal scroll position.
         * Modify as appropriate to allow for dynamic calculations
         */
        getFixedOffset: function() {
          return this.OFFSET_HEIGHT_PX;
        },

        /**
         * If the provided href is an anchor which resolves to an element on the
         * page, scroll to it.
         * @param  {String} href
         * @return {Boolean} - Was the href an anchor.
         */
        scrollIfAnchor: function(href, pushToHistory) {
          var match, anchorOffset;

          if(!this.ANCHOR_REGEX.test(href)) {
            return false;
          }

          match = document.getElementById(href.slice(1));

          if(match) {
            anchorOffset = $(match).offset().top - this.getFixedOffset();
            $('html, body').animate({ scrollTop: anchorOffset});

            // Add the state to history as-per normal anchor links
            if(HISTORY_SUPPORT && pushToHistory) {
              history.pushState({}, document.title, location.pathname + href);
            }
          }

          return !!match;
        },

        /**
         * Attempt to scroll to the current location's hash.
         */
        scrollToCurrent: function(e) {
          if(this.scrollIfAnchor(window.location.hash) && e) {
            e.preventDefault();
          }
        },

        /**
         * If the click event's target was an anchor, fix the scroll position.
         */
        delegateAnchors: function(e) {
          var elem = e.target;

          if(this.scrollIfAnchor(elem.getAttribute('href'), true)) {
            e.preventDefault();
          }
        }
      };

      $(document).ready($.proxy(anchorScrolls, 'init'));
    })(window.document, window.history, window.location);

  </script>
  <script type="opt-in" data-name="analytics" data-type="text/javascript" data-src="https://rasa.com/assets/js/u-info.js"></script>
      <div class="webchat-banner webchat-banner--hidden">
        <img src="https://rasa.com/assets/img/demo/sara_avatar.png" class="webchat-banner__avatar" alt="">
        👋 I can help you get started with Rasa and answer your technical questions.
        <button class="webchat-banner__close">
          <i class="fas fa-times"></i> 
        </button>
      </div>
      <div id="webchat">
        <script src="../../_static/rasa-webchat.js"></script>
        <script>
          WebChat.default.init({
            selector: "#webchat",
            initPayload: "/greet",
            socketUrl: "https://website-demo.rasa.com/",
            socketPath: "/socket.io",
            title: "Sara",
            subtitle: "I'm still in development",
            profileAvatar: "https://rasa.com/assets/img/demo/sara_avatar.png",
            showCloseButton: true,
            fullScreenMode: false,
            hideWhenNotConnected: false,
            connectOn: "open",
            autoClearCache: true,
            linksOpenTab: false,
            openLauncherImage: "../../_static/chat-icon.svg",
            customMessageDelay: (message) => {
              return 900 + message.length;
            },
            params: {
              storage: "local"
            },
            onWidgetEvent: {
              onChatOpen: () => {
                const webchatBanner = document.querySelector('.webchat-banner');
                if (webchatBanner) {
                  localStorage.setItem('WEBCHAT_BANNER_DISMISSED', 'true');
                  webchatBanner.classList.add('webchat-banner--hidden');
                }
              }
            }
          });

          try {
            const webchatBanner = document.querySelector('.webchat-banner');

            if (webchatBanner) {
              if (localStorage.getItem('WEBCHAT_BANNER_DISMISSED') !== 'true') {
                webchatBanner.classList.remove('webchat-banner--hidden');
              }

              const webChatBannerClose = document.querySelector('.webchat-banner__close');

              webChatBannerClose && webChatBannerClose.addEventListener('click', function() {
                localStorage.setItem('WEBCHAT_BANNER_DISMISSED', 'true');
                webchatBanner.classList.add('webchat-banner--hidden');
              });
            }
          } catch (e) {}
        </script>
      </div>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>