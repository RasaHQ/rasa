recipe: default.v1
language: en
pipeline:
  - name: LLMBasedRouter
    prompt: data/test_config/providers/router_template.jinja2
    llm:
      provider: azure
      deployment: test-gpt-35-turbo
      api_type: azure
      api_base: https://devtribe-testing-canada-east.openai.azure.com/
      api_version: 2024-02-01
      timeout: 7
    calm_entry:
      sticky: "handles everything else, including finance, transactions, transfers, balance, contacts and pizza orders"
    nlu_entry:
      sticky: "handles everything around health advice and hotel or restaurant bookings"
      non_sticky: "handles chitchat"
  - name: WhitespaceTokenizer
  - name: CountVectorsFeaturizer
  - name: CountVectorsFeaturizer
    analyzer: char_wb
    min_ngram: 1
    max_ngram: 4
  - name: LogisticRegressionClassifier
    max_iter: 100
    solver: lbfgs
    tol: 0.0001
    random_state: 42
    ranking_length: 10
  - name: CRFEntityExtractor
  - name: DucklingEntityExtractor
    url: "http://localhost:8000"
    dimensions: ["time", "number"]
    timezone: "Europe/Berlin"
    timeout: 3
  - name: NLUCommandAdapter
  - name: MultiStepLLMCommandGenerator
    llm:
      provider: azure
      deployment: test-gpt-35-turbo
      api_type: azure
      api_base: https://devtribe-testing-canada-east.openai.azure.com/
      api_version: 2024-02-01
      timeout: 7
    embeddings:
      provider: azure
      deployment: test-text-embedding-3-small
      api_type: azure
      api_base: https://devtribe-testing-canada-east.openai.azure.com/
      api_version: 2023-05-15
      timeout: 7
    flow_retrieval:
      embeddings:
        provider: azure
        deployment: test-text-embedding-3-small
        api_type: azure
        api_base: https://devtribe-testing-canada-east.openai.azure.com/
        api_version: 2023-05-15
        timeout: 7

policies:
  - name: RulePolicy
  - name: TEDPolicy
    constrain_similarities: true
  - name: FlowPolicy
  - name: EnterpriseSearchPolicy
    citation_enabled: true
    use_generative_llm: true
    vector_store:
      source: rasa-calm-demo/docs/
    embeddings:
      provider: azure
      deployment: test-text-embedding-3-small
      api_type: azure
      api_base: https://devtribe-testing-canada-east.openai.azure.com/
      api_version: 2023-05-15
      timeout: 7
    llm:
      provider: azure
      deployment: test-gpt-35-turbo
      api_type: azure
      api_base: https://devtribe-testing-canada-east.openai.azure.com/
      api_version: 2024-02-01
      timeout: 7
  - name: IntentlessPolicy
    llm:
      provider: azure
      deployment: test-gpt-35-turbo
      api_type: azure
      api_base: https://devtribe-testing-canada-east.openai.azure.com/
      api_version: 2024-02-01
      timeout: 7
    embeddings:
      provider: azure
      deployment: test-text-embedding-3-small
      api_type: azure
      api_base: https://devtribe-testing-canada-east.openai.azure.com/
      api_version: 2023-05-15
      timeout: 7

assistant_id: 20240418-073244-narrow-archive
