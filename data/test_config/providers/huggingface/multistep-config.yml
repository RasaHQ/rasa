recipe: default.v1
language: en
pipeline:
  - name: LLMBasedRouter
    prompt: data/test_config/providers/router_template.jinja2
    llm:
      provider: huggingface
      model: meta-llama/Llama-3.2-3B
      api_base: "https://z35w5f1azkh4s9id.us-east-1.aws.endpoints.huggingface.cloud"
      timeout: 30
      num_retries: 10
    calm_entry:
      sticky: "handles everything else, including finance, transactions, transfers, balance, contacts and pizza orders"
    nlu_entry:
      sticky: "handles everything around health advice and hotel or restaurant bookings"
      non_sticky: "handles chitchat"
  - name: WhitespaceTokenizer
  - name: CountVectorsFeaturizer
  - name: CountVectorsFeaturizer
    analyzer: char_wb
    min_ngram: 1
    max_ngram: 4
  - name: LogisticRegressionClassifier
    max_iter: 100
    solver: lbfgs
    tol: 0.0001
    random_state: 42
    ranking_length: 10
  - name: CRFEntityExtractor
  - name: DucklingEntityExtractor
    url: "http://localhost:8000"
    dimensions: ["time", "number"]
    timezone: "Europe/Berlin"
    timeout: 3
  - name: NLUCommandAdapter
  - name: MultiStepLLMCommandGenerator
    llm:
      provider: huggingface
      model: meta-llama/Llama-3.2-3B
      api_base: "https://z35w5f1azkh4s9id.us-east-1.aws.endpoints.huggingface.cloud"
      timeout: 30
      num_retries: 10

policies:
  - name: RulePolicy
  - name: TEDPolicy
    constrain_similarities: true
  - name: FlowPolicy
  - name: EnterpriseSearchPolicy
    citation_enabled: true
    use_generative_llm: true
    vector_store:
      source: rasa-calm-demo/docs/
    llm:
      provider: huggingface
      model: meta-llama/Llama-3.2-3B
      api_base: "https://z35w5f1azkh4s9id.us-east-1.aws.endpoints.huggingface.cloud"
      timeout: 30
      num_retries: 10
  - name: IntentlessPolicy
    llm:
      provider: huggingface
      model: meta-llama/Llama-3.2-3B
      api_base: "https://z35w5f1azkh4s9id.us-east-1.aws.endpoints.huggingface.cloud"
      timeout: 30
      num_retries: 10

assistant_id: 20240418-073244-narrow-archive
